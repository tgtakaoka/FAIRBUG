 AS V1.42 Beta [Bld 239] - Source File FAIRBUG.ASM - Page 1 - 04/03/2023 01:42:09 PM


       1/       0 :                     ;*FAIRBUG       +      EDUCATOR
       2/       0 :                     ;*R.VATERT             J.EFSTATHIOU
       3/       0 :                     ;*FOR 2K PSU
       4/       0 :                     ;*9/28/77
       5/    8000 :                     XX       ORG       H'8000'
       6/    8000 : =82B9H               A        EQU       (A1-1)
       7/    8000 : =82H                 HIBY     EQU       H'82'     ; HI 8 BIT ADD
       8/    8000 : =0B9H                LOBY     EQU       H'B9'     ; LO 8 BIT ADD
       9/    8000 : =0H                  BAUD     EQU       0
      10/    8000 : =1H                  CHRS     EQU       1
      11/    8000 : =2H                  BCNT     EQU       2
      12/    8000 : =3H                  TEMP     EQU       3
      13/    8000 : =8H                  HFLG     EQU       8
      14/    8000 : =5H                  CCNT     EQU       5
      15/    8000 : =6H                  XFLG     EQU       6
      16/    8000 : =6H                  SAVE     EQU       XFLG
      17/    8000 : =7H                  CKSM     EQU       7
      18/    8000 : =8H                  FCNT     EQU       8
      19/    8000 : =9H                  FLG      EQU       9
      20/    8000 : =7H                  SIZE     EQU       CKSM
      21/    8000 : =3H                  SA       EQU       3
      22/    8000 : =5H                  EA       EQU       5
      23/    8000 : =6H                  EALO     EQU       XFLG
      24/    8000 : =5H                  EAHI     EQU       CCNT
      25/    8000 : =3EBH                MLO      EQU       H'3EB'    ; END RAM 0-1K
      26/    8000 : =0BEBH               MHI      EQU       H'BEB'    ; END RAM 3-4K
      27/    8000 : =0CH                 OO       EQU       12        ; IO DISPLAY PORT
      28/    8000 : =0DH                 PP       EQU       13
      29/    8000 : =0FH                 RR       EQU       15        ; FLG+H'43'=REGIS
      30/    8000 : =0AH                 MM       EQU       10        ; FLG+H'43'=MEMOR
      31/    8000 : =0F8H                HI       EQU       H'F8'
      32/    8000 : =0BH                 CC       EQU       11
      33/    8000 : =0BH                 CHR1     EQU       11
      34/    8000 : =0DH                 CR       EQU       H'0D'
      35/    8000 : =0AH                 LF       EQU       H'0A'
      36/    8000 : =0BH                 NUSE     EQU       H'0B'     ; UNUSED PORT ADD
      37/    8000 : =8H                  OPOR     EQU       8         ; SERIAL PORT,OUT
      38/    8000 : =8H                  IPOR     EQU       8         ; SERIAL PORT,INP
      39/    8000 : =8H                  PSTS     EQU       8         ; PARALLEL PORT,S
      40/    8000 : =9H                  PPRT     EQU       9         ; PARALLEL PORT,D
      41/    8000 :                     ;*LOOP TO SAVE R0-R15 IN MEMORY
      42/    8000 : 70                  BGL1     LIS       0
      43/    8001 : 0B                  BGLP     LR        IS,A
      44/    8002 : 4C                           LR        A,S
      45/    8003 : 17                           ST
      46/    8004 : 0A                           LR        A,IS
      47/    8005 : 1F                           INC
      48/    8006 : 25 10                        CI        16
      49/    8008 : 94 F8                        BNZ       BGLP      ; NOT 16,NOT DONE
      50/    800A : 16                           LM                  ; BAUD
      51/    800B : 50                           LR        BAUD,A    ; SET TEMP AT LEA
      52/    800C : 20 E7                        LI        -25
      53/    800E : 8E                           ADC                 ; SET DC
      54/    800F : 08                           LR        K,P       ; PC TO R12-13
      55/    8010 : 00                           LR        A,KU
      56/    8011 : 17                           ST                  ; SAVE PC HI
      57/    8012 : 01                           LR        A,KL
      58/    8013 : 17                           ST                  ; SAVE PC LO
      59/    8014 : 71                           LIS       1
      60/    8015 : B8                           OUTS      OPOR      ; MARK BIT TO STA
 AS V1.42 Beta [Bld 239] - Source File FAIRBUG.ASM - Page 2 - 04/03/2023 01:42:09 PM


      61/    8016 : A8                           INS       IPOR
      62/    8017 : 21 20                        NI        H'20'
      63/    8019 : 94 19                        BNZ       EDUL
      64/    801B : 0E                           LR        Q,DC      ; QU WILL NOW HAV
      65/    801C : A8                           INS       IPOR      ; GET BAUD OPTION
      66/    801D : 18                           COM
      67/    801E : 21 06                        NI        6
      68/    8020 : 12                           SR        1
      69/    8021 : 84 0A                        BZ        BGND
      70/    8023 : 2A 80 2F                     DCI       (TBX-1)
      71/    8026 : 8E                           ADC
      72/    8027 : 16                           LM
      73/    8028 : 50                           LR        BAUD,A    ; BAUD = TABLE VA
      74/    8029 : 28 85 60                     PI        TTD       ; DELAY FOR KEY BD
      75/    802C : 29 81 D1            BGND     JMP       STRT      ; TO CONVERSATIONA
      76/    802F : 2B                           NOP
      77/    8030 :                     ;*
      78/    8030 : EA                  TBX      DB        H'EA'     ; 1200 BAUD
      79/    8031 : A4                           DB        H'A4'     ; 300 BAUD
      80/    8032 : 06                           DB        6         ; 110 BAUD
      81/    8033 : 29 85 AD            EDUL     JMP       (EDUX+2)
      82/    8036 :                     ;*BOOTSTRAP FORMAT PUNCH SUBROUTINE
      83/    8036 :                     ;*   START ADDRESS IN DC ON ENTRY
      84/    8036 :                     ;*   END ADDRESS IN R6-7 ON ENTRY
      85/    8036 :                     ;*WRITE BLANK LEADER
      86/    8036 : 45                  FPUN     LR        A,EAHI
      87/    8037 : 18                           COM
      88/    8038 : 55                           LR        EAHI,A    ; NOW 1'S COMPLIM
      89/    8039 : 46                           LR        A,EALO
      90/    803A : 18                           COM                 ; NEGATIVE
      91/    803B : 1F                           INC                 ; 2'S COMPLIMENT
      92/    803C : 56                           LR        EALO,A
      93/    803D : 45                           LR        A,EAHI
      94/    803E : 19                           LNK
      95/    803F : 55                           LR        EAHI,A    ; NOW 2'S COMPLIM
      96/    8040 : 20 92                        LI        H'92'     ; NUMBER OF NULLS
      97/    8042 : 57                           LR        CKSM,A
      98/    8043 : 90 02                        BR        (FPN1+1)
      99/    8045 : 70                  FPN1     LIS       0
     100/    8046 : 51                           LR        CHRS,A
     101/    8047 : 28 85 93                     PI        TTYO      ; WRITE BLANKS
     102/    804A : 37                           DS        CKSM
     103/    804B : 94 F9                        BNZ       FPN1      ; CONTINUE BKANKI
     104/    804D : E8                           XS        HFLG
     105/    804E : 81 09                        BP        FCON      ; THIS WAS LEADER
     106/    8050 :                     ;*TRAILER PUNCHED NOW FINISH
     107/    8050 : 20 94                        LI        H'94'
     108/    8052 : 51                           LR        CHRS,A
     109/    8053 : 28 85 93                     PI        TTYO
     110/    8056 : 90 57                        BR        BGSV
     111/    8058 :                     ;*
     112/    8058 :                     ;*WRITE STARTING ADDRESS
     113/    8058 : 20 FF               FCON     LI        H'FF'
     114/    805A : 51                           LR        CHRS,A
     115/    805B : 28 85 93                     PI        TTYO
     116/    805E : 20 3A                        LI        H'3A'     ; COLON FORMULATO
     117/    8060 : 51                           LR        CHRS,A
     118/    8061 : 28 85 93                     PI        TTYO
     119/    8064 : 20 18                        LI        24        ; LENGTH=24
     120/    8066 : 58                           LR        HFLG,A
 AS V1.42 Beta [Bld 239] - Source File FAIRBUG.ASM - Page 3 - 04/03/2023 01:42:09 PM


     121/    8067 : 07                           LR        QL,A      ; OUTPUT BYTE
     122/    8068 : 28 81 1D                     PI        FOP2      ; WRITE LENGTH
     123/    806B : 4A                           LR        A,10
     124/    806C : 07                           LR        QL,A
     125/    806D : 28 81 1D                     PI        FOP2      ; OUTPUT HI ADDRE
     126/    8070 : 4B                           LR        A,11
     127/    8071 : 07                           LR        QL,A
     128/    8072 : 28 81 1D                     PI        FOP2      ; OUTPUT LO ADDRE
     129/    8075 : 70                           LIS       0
     130/    8076 : 07                           LR        QL,A      ; RECORD TYPE=0
     131/    8077 : 28 81 1D                     PI        FOP2
     132/    807A : 10                           LR        DC,H
     133/    807B : 20 18                        LI        24
     134/    807D : 58                           LR        HFLG,A    ; SET TO 24
     135/    807E : 90 03                        BR        FLOP
     136/    8080 :                     ;****************
     137/    8080 : 90 2D                        BR        BGSV      ; START FAIRBUG
     138/    8082 :                     ;****************
     139/    8082 : 28 81 1B            FLOP     PI        FOP1      ; WRITE 2 CHR FR
     140/    8085 : 11                           LR        H,DC
     141/    8086 : 38                           DS        HFLG      ; COUNT-1
     142/    8087 : 94 FA                        BNZ       FLOP      ; NOT 24 YET
     143/    8089 :                     ;*NOW CHECKSUM
     144/    8089 : 47                           LR        A,CKSM
     145/    808A : 18                           COM
     146/    808B : 1F                           INC
     147/    808C : 07                           LR        QL,A
     148/    808D : 78                           LIS       8
     149/    808E : 58                           LR        HFLG,A    ; FLAG PLUS FOR 2
     150/    808F : 28 81 1D                     PI        FOP2      ; WRITE 2 CHAR CK
     151/    8092 : 28 85 78                     PI        TTCR      ; TYPE CR/LF
     152/    8095 :                     ;*NOW CHECK IF ALL MEMORY IS PUNCHED,HI MUST
     153/    8095 : 4B                           LR        A,11      ; LAST LOW ADDRES
     154/    8096 : C6                           AS        EALO      ; ENDING LOW ADDR
     155/    8097 : 4A                           LR        A,10      ; LAST HI ADDRESS
     156/    8098 : 19                           LNK
     157/    8099 : C5                           AS        EAHI
     158/    809A : 92 BD                        BNC       FCON      ; NOT DONE YET
     159/    809C : 07                           LR        QL,A      ; ZERO
     160/    809D :                     ;*
     161/    809D :                     ;*NOW WROTE ZERO RECORD PRIOR TO TRAILER
     162/    809D :                     ;*
     163/    809D : 20 3A                        LI        H'3A'     ; COLON
     164/    809F : 51                           LR        CHRS,A
     165/    80A0 : 28 85 93                     PI        TTYO      ; PUNCH VCOLON
     166/    80A3 : 78                           LIS       8
     167/    80A4 : 58                           LR        HFLG,A
     168/    80A5 : 28 81 1D            HERE     PI        FOP2      ; PUNCH 2 ZERO CHAR
     169/    80A8 : 38                           DS        HFLG
     170/    80A9 : 94 FB                        BNZ       HERE      ; REPEAT IF NOT 0
     171/    80AB : 38                           DS        HFLG      ; SET TO -1
     172/    80AC : 90 8B                        BR        (FPUN+2)  ; TRAILER
     173/    80AE :                     ;*TABLE OF DEFAULT DELAY COUNTERS
     174/    80AE :                     ;*SAVE ROUTINE   TO SAVE THE INITIAL STATE OF
     175/    80AE :                     ;*     RESTORE SUBROUTINE WILL PUT IT BACK
     176/    80AE : 1A                  BGSV     DI                  ; DISABLE INTERRU
     177/    80AF : 58                           LR        8,A       ; A SAVED IN R8
     178/    80B0 : 0A                           LR        A,IS      ; ISAR TO A
     179/    80B1 : 67                           LISU      7
     180/    80B2 : 6C                           LISL      4
 AS V1.42 Beta [Bld 239] - Source File FAIRBUG.ASM - Page 4 - 04/03/2023 01:42:09 PM


     181/    80B3 : 5D                           LR        I,A       ; ISAR TO R74
     182/    80B4 : 49                           LR        A,9
     183/    80B5 : 5D                           LR        I,A       ; R9 TO R75
     184/    80B6 : 1E                           LR        J,W       ; STATUS TO R9
     185/    80B7 : 4A                           LR        A,10
     186/    80B8 : 5D                           LR        I,A       ; R10 TO R76
     187/    80B9 : 4B                           LR        A,11
     188/    80BA : 5C                           LR        S,A       ; R11 TO R77
     189/    80BB : 11                           LR        H,DC      ; DC TO R 10-11
     190/    80BC :                     ;*CHECK ADDRESS OF SCRATCH RAM
     191/    80BC : 2A 0B EB                     DCI       MHI
     192/    80BF : 16                           LM
     193/    80C0 : 18                           COM
     194/    80C1 : 2A 0B EB                     DCI       MHI
     195/    80C4 : 17                           ST                  ; WRITE COMPLEMEN
     196/    80C5 : 2A 0B EB                     DCI       MHI
     197/    80C8 : 8C                           XM                  ; XOR SHOULD BE Z
     198/    80C9 : 2A 0B EB                     DCI       MHI
     199/    80CC : 84 04                        BZ        BG1       ; IF ZERO SCRATCH
     200/    80CE : 2A 03 EB                     DCI       MLO       ; NOT 4K CRATCH M
     201/    80D1 : 4A                  BG1      LR        A,10
     202/    80D2 : 17                           ST
     203/    80D3 : 4B                           LR        A,11
     204/    80D4 : 17                           ST                  ; DC NOW IN RAM
     205/    80D5 : 2C                           XDC
     206/    80D6 : 11                           LR        H,DC      ; DC1
     207/    80D7 : 2C                           XDC
     208/    80D8 : 4A                           LR        A,10
     209/    80D9 : 17                           ST                  ; DC1 UPPER
     210/    80DA : 4B                           LR        A,11
     211/    80DB : 17                           ST                  ; DC1 LOWER
     212/    80DC : 4E                           LR        A,D
     213/    80DD : 5B                           LR        11,A      ; RESTORE R11
     214/    80DE : 4C                           LR        A,S
     215/    80DF : 5A                           LR        10,A      ; RESTIRE 10
     216/    80E0 : 49                           LR        A,9
     217/    80E1 : 5E                           LR        D,A       ; STATUS TO R76
     218/    80E2 : 4C                           LR        A,S
     219/    80E3 : 59                           LR        9,A
     220/    80E4 : 29 80 00                     JMP       BGL1      ; TO FINISH SAVE
     221/    80E7 :                     ;* RESTIRE ROUTINE    RESET REGISTERS THEN RE
     222/    80E7 : 20 E7               REST     LI        H'E7'
     223/    80E9 : 07                           LR        QL,A
     224/    80EA : 0F                           LR        DC,Q      ; SET DC TO RESTO
     225/    80EB : 16                           LM
     226/    80EC : 04                           LR        KU,A
     227/    80ED : 16                           LM
     228/    80EE : 05                           LR        KL,A
     229/    80EF : 09                           LR        P,K       ; 12-13 TO PC1
     230/    80F0 : 16                           LM                  ; SKIP MEM
     231/    80F1 : 16                           LM                  ; SKIP AGAIN
     232/    80F2 : 16                           LM
     233/    80F3 : 06                           LR        QU,A      ; DC TO R14
     234/    80F4 : 16                           LM
     235/    80F5 : 07                           LR        QL,A      ; DC TO R15
     236/    80F6 : 2C                           XDC
     237/    80F7 : 0F                           LR        DC,Q      ; DC0 RESTORE
     238/    80F8 : 2C                           XDC
     239/    80F9 : 16                           LM
     240/    80FA : 06                           LR        QU,A
 AS V1.42 Beta [Bld 239] - Source File FAIRBUG.ASM - Page 5 - 04/03/2023 01:42:09 PM


     241/    80FB : 16                           LM
     242/    80FC : 07                           LR        QL,A      ; DC1 NOW IN Q
     243/    80FD : 70                           LIS       0
     244/    80FE :                     ;*LOOP TO RESTORE R0-R13 FROM SCRATCH RAM
     245/    80FE : 0B                  LOUP     LR        IS,A
     246/    80FF : 16                           LM
     247/    8100 : 5C                           LR        S,A       ; R0-R13 RESTORE
     248/    8101 : 0A                           LR        A,IS
     249/    8102 : 1F                           INC
     250/    8103 : 25 0E                        CI        14
     251/    8105 : 94 F8                        BNZ       LOUP      ; NOT DONE YET
     252/    8107 : 67                           LISU      7
     253/    8108 : 49                           LR        A,9
     254/    8109 : 5D                           LR        I,A
     255/    810A : 16                           LM
     256/    810B : 59                           LR        9,A       ; R14 TO R9
     257/    810C : 16                           LM
     258/    810D : 0F                           LR        DC,Q      ; RESTORE DC
     259/    810E : 2C                           XDC                 ; DC1 FROM DC0 TO
     260/    810F : 07                           LR        QL,A
     261/    8110 : 49                           LR        A,9       ; RESTORE R14-15
     262/    8111 : 06                           LR        QU,A
     263/    8112 :                     ;*NOW DO SR,ISAR,9,A
     264/    8112 : 4E                           LR        A,D       ; GET STATUS
     265/    8113 : 59                           LR        9,A       ; SR TO J
     266/    8114 : 1D                           LR        W,J       ; STATUS RESTORED
     267/    8115 : 4E                           LR        A,D       ; GET R9
     268/    8116 : 59                           LR        9,A       ; R9 RESTORED
     269/    8117 : 4E                           LR        A,D       ; GET ISAR
     270/    8118 : 0B                           LR        IS,A      ; ISAR RESTORED
     271/    8119 : 48                           LR        A,8       ; RESTORE A
     272/    811A : 1C                           POP                 ; TO USER
     273/    811B :                     ;*SUBROUTINE TO OUTBYTE 1 BYTE AS 2  4 BIT AS
     274/    811B :                     ;*CKSM IS ACCUMLATED
     275/    811B :                     ;*HFLG MUST BE POSITIVE NUMBER
     276/    811B : 16                  FOP1     LM
     277/    811C : 07                           LR        QL,A
     278/    811D :                     ;*ENTRY WITH CHARACTER IN REG SAVE
     279/    811D : 08                  FOP2     LR        K,P       ; SAVE
     280/    811E : 48                  FLP1     LR        A,HFLG
     281/    811F : 18                           COM                 ; SET STATUS
     282/    8120 : 58                           LR        HFLG,A
     283/    8121 : 03                           LR        A,QL
     284/    8122 : 91 02                        BM        FHI       ; DO HI 4 BITS IF
     285/    8124 : 15                  FLO      SL        4         ; LOSE HI BITS
     286/    8125 : 14                  FHI      SR        4         ; MOVE TO LO 4 BI
     287/    8126 :                     ;*CONVERT TO ASC 0='30',9='39',A='41',F='46'
     288/    8126 : 24 30                        AI        H'30'
     289/    8128 : 25 39                        CI        H'39'
     290/    812A : 81 03                        BP        FINT      ; NOT A-F
     291/    812C : 24 07                        AI        7
     292/    812E : 51                  FINT     LR        CHRS,A
     293/    812F : 28 85 93                     PI        TTYO      ; TYPE FRAME
     294/    8132 : 38                           DS        HFLG
     295/    8133 : 91 EA                        BM        FLP1      ; DO LOW HALF WOR
     296/    8135 :                     ;*DO CHECKSUM
     297/    8135 : 03                           LR        A,QL      ; LAST BYTE OUTPU
     298/    8136 : C7                           AS        CKSM      ; ADD TO PROIR CK
     299/    8137 : 57                           LR        CKSM,A    ; SAVE UPDATED CK
     300/    8138 : 0C                           PK                  ; RETURN FROM K R
 AS V1.42 Beta [Bld 239] - Source File FAIRBUG.ASM - Page 6 - 04/03/2023 01:42:09 PM


     301/    8139 :                     ;*FETCH PARAMETERS AFTER LEGIT CODE IS IN
     302/    8139 :                     ;*MAX FIELD 1 AND 2 IS 4 HEX DIGITS
     303/    8139 :                     ;*MAX FIELD 3 IS 1 HEX DIGIT
     304/    8139 : 73                  FECH     LIS       3
     305/    813A : 58                           LR        FCNT,A    ; PARAMETER COUNT
     306/    813B : 0B                           LR        IS,A      ; ISAR=3
     307/    813C : 74                  FA       LIS       4
     308/    813D : 5B                           LR        CC,A      ; CHAR CNT=4
     309/    813E :                     ;*READ CHARACTER
     310/    813E : 28 85 53            FB       PI        TTYI      ; GET CHAR
     311/    8141 : 21 7F                        NI        H'7F'
     312/    8143 : 57                           LR        7,A
     313/    8144 : 25 0D                        CI        CR
     314/    8146 : 84 3E                        BZ        CORE      ; CORRECT FIELD B
     315/    8148 : 28 85 93                     PI        TTYO      ; ECHO INPUT CHAR
     316/    814B : 47                           LR        A,7
     317/    814C : 25 2D                        CI        '-'       ; FIELD SEPARATOR
     318/    814E : 84 33                        BZ        CORN
     319/    8150 : 25 2B                        CI        '+'
     320/    8152 : 84 2F                        BZ        CORN
     321/    8154 : 25 3D                        CI        '='
     322/    8156 : 84 30                        BZ        CORT
     323/    8158 : 25 5B                        CI        H'5B'     ; KILL CHAR?
     324/    815A : 84 78                        BZ        STR1      ; KILL INPUT
     325/    815C :                     ;*MUST BE HEX 0-9, OR A-F
     326/    815C : 25 2F                        CI        H'2F'     ; LESS THAN ZERO
     327/    815E : 81 DF                        BP        FB        ; ERROR IGNORE
     328/    8160 : 25 46                        CI        H'46'     ; F?
     329/    8162 : 91 DB                        BM        FB        ; ERROR IGNORE
     330/    8164 : 24 D0                        AI        H'D0'
     331/    8166 : 25 09                        CI        H'9'
     332/    8168 : 81 07                        BP        FOK
     333/    816A : 25 10                        CI        H'10'
     334/    816C : 81 D1                        BP        FB        ; ERROT,IGNORE IT
     335/    816E : 24 F9                        AI        H'F9'
     336/    8170 : 3B                  FOK      DS        CC
     337/    8171 : 91 CC                        BM        FB        ; FULL FIELD IGNO
     338/    8173 :                     ;*ZERO LO 4 BITS,THEN ADD THIS DIGIT
     339/    8173 : 52                           LR        2,A
     340/    8174 : 4C                           LR        A,S
     341/    8175 : 15                           SL        4
     342/    8176 : C2                           AS        2
     343/    8177 : 5D                           LR        I,A       ; TO PARAMETER LO
     344/    8178 : 71                           LIS       1
     345/    8179 : FB                           NS        CC
     346/    817A : 84 C3                        BZ        FB        ; EVEN CHAR,2 IG
     347/    817C : 4E                           LR        A,D       ; SET ISAR BACK 1
     348/    817D : 8F C0                        BR7       FB        ; GET NEXT DIGIT
     349/    817F : 73                           LIS       3
     350/    8180 : 90 35                        BR        COR7      ; PARAMETERS FULL
     351/    8182 : 59                  CORN     LR        9,A
     352/    8183 : 90 03                        BR        CORT
     353/    8185 :                     ;*CORRECT HEX FIELD ,RIGHT JUSTIFY
     354/    8185 :                     ;*   IF AB0C THEN 0ABC
     355/    8185 :                     ;*IF ABCD THEN IT IS OK
     356/    8185 :                     ;*   IF A00 THEN 000A
     357/    8185 :                     ;*IF   AB00 THEN 00AB
     358/    8185 : 7D                  CORE     LIS       H'D'
     359/    8186 : 57                           LR        7,A
     360/    8187 : 74                  CORT     LIS       4
 AS V1.42 Beta [Bld 239] - Source File FAIRBUG.ASM - Page 7 - 04/03/2023 01:42:09 PM


     361/    8188 : EB                           XS       CC
     362/    8189 : 84 1F                        BZ       COR6       ; NO PARAMETERS
     363/    818B : 3B                           DS       CC
     364/    818C : 91 1B                        BM       COR5       ; FIELD ABCD,AOK
     365/    818E : 94 0C                        BNZ      COR1
     366/    8190 : 7F                           LIS      15
     367/    8191 : FC                           NS       S
     368/    8192 : 5E                           LR       D,A
     369/    8193 : 4D                           LR       A,I
     370/    8194 : 15                           SL       4
     371/    8195 : EC                           XS       S
     372/    8196 : 5E                           LR       D,A
     373/    8197 : 4C                           LR       A,S
     374/    8198 : 14                           SR       4
     375/    8199 : 90 0C                        BR       COR4
     376/    819B : 3B                  COR1     DS       CC
     377/    819C : 84 05                        BZ       COR2
     378/    819E : 7F                           LIS      15
     379/    819F : FD                           NS       I
     380/    81A0 : 90 03                        BR       COR3
     381/    81A2 : 4E                  COR2     LR       A,D
     382/    81A3 : 4D                           LR       A,I
     383/    81A4 : 5E                  COR3     LR       D,A
     384/    81A5 : 70                           LIS      0
     385/    81A6 : 5D                  COR4     LR       I,A
     386/    81A7 : 4D                           LR       A,I
     387/    81A8 : 38                  COR5     DS       FCNT
     388/    81A9 : 47                  COR6     LR       A,7
     389/    81AA : 25 0D                        CI       CR
     390/    81AC : 84 05                        BZ       COR8
     391/    81AE : 25 3D                        CI       '='
     392/    81B0 : 94 8B                        BNZ      FA         ; LAST CHAR NOT C
     393/    81B2 : 48                  COR8     LR       A,FCNT
     394/    81B3 : 18                           COM
     395/    81B4 : 24 04                        AI       4
     396/    81B6 : 58                  COR7     LR       FCNT,A
     397/    81B7 : 90 44                        BR       RTN
     398/    81B9 :                     ;*ROUTINE TO FETCH DIRECTIVE,THEN CALL PARAME
     399/    81B9 :                     ;*   THEN GO TO CORRECT PROCESS ROUTINE THRU
     400/    81B9 :                     AL1      function addr, addr & H'FF'
     401/    81B9 : 01                  TBLS     DB     AL1(A1-A)    ; ACCUMULATOR DIS
     402/    81BA : 9E                           DB     AL1(B-A)     ; BINARY DUMP
     403/    81BB : 06                           DB     AL1(C-A)     ; CHANGE FIELD
     404/    81BC : 42                           DB     AL1(D-A)     ; DC DISPLAY
     405/    81BD : 47                           DB     AL1(E-A)     ; EXAMINE
     406/    81BE : 4D                           DB     AL1(F-A)     ; FORMATTED PUNCH
     407/    81BF : 50                           DB     AL1(G-A)     ; GO TO
     408/    81C0 : 6A                           DB     AL1(H-A)     ; HIGH SPEED LOAD
     409/    81C1 : 5F                           DB     AL1(I-A)     ; ISAR DISPLAY
     410/    81C2 : A2                           DB     AL1(J-A)     ; 8 BIT PROM PUNC
     411/    81C3 : FF                           DB     AL1(-1)      ; K
     412/    81C4 : 70                           DB     AL1(L-A)     ; LOAD
     413/    81C5 : 73                           DB     AL1(M-A)     ; MEMORY DISPLAY
     414/    81C6 : 76                           DB     AL1(N-A)     ; NEXT DISPLAY
     415/    81C7 : 6D                           DB     AL1(O-A)     ; PORT DISPLAY
     416/    81C8 : 82                           DB     AL1(P-A)     ; PC DISPLAY
     417/    81C9 : FF                           DB     AL1(-1)      ; Q
     418/    81CA : A8                           DB     AL1(R-A)     ; REGISTER DISPLA
     419/    81CB : 9A                           DB     AL1(S-A)     ; STATUS DISPLAY
     420/    81CC : 04                           DB     AL1(T-A)     ; CLEAR BREAK POI
 AS V1.42 Beta [Bld 239] - Source File FAIRBUG.ASM - Page 8 - 04/03/2023 01:42:09 PM


     421/    81CD : A5                           DB     AL1(U-A)     ; BREAKPOINT
     422/    81CE : FC                           DB     AL1(V-A)     ; MOVE BLOCK
     423/    81CF : 9A                           DB     AL1(S-A)     ; W (STATUS) DISP
     424/    81D0 : 02                  HXX      DB     AL1(X-A)     ; HEX ARITHMETIC
     425/    81D1 : 4B                  STRT     LR        A,11      ; FREE R11
     426/    81D2 : 07                           LR        QL,A
     427/    81D3 : 28 85 78            STR1     PI        TTCR      ; WRITE CR/LF
     428/    81D6 : 20 3F                        LI        '?'       ; PROMPT CHARACTE
     429/    81D8 : 51                           LR        CHRS,A
     430/    81D9 : 28 85 93                     PI        TTYO
     431/    81DC :                     ;*READ INPUT CHARACTER
     432/    81DC : 28 85 53            READ     PI        TTYI
     433/    81DF : 53                           LR        3,A       ; SAVE CHAR
     434/    81E0 : 28 85 93                     PI        TTYO      ; ECHO CHAR
     435/    81E3 : 43                           LR        A,3
     436/    81E4 : 21 7F                        NI        H'7F'     ; 7 BITS ONLY
     437/    81E6 : 25 40                        CI        H'40'
     438/    81E8 : 81 EA                        BP        STR1      ; LESS THAN 'A' I
     439/    81EA : 25 58                        CI        'X'
     440/    81EC : 91 E6                        BM        STR1      ; GREATER THAN 'W
     441/    81EE : 21 1F                        NI        H'1F'     ; SAVE 5 BITS ONL
     442/    81F0 : 2A 81 B8                     DCI       (TBLS-1)
     443/    81F3 : 8E                           ADC
     444/    81F4 : 16                           LM                  ; GET TABLE VALUE
     445/    81F5 : 05                  RPTC     LR        KL,A      ; SAVE INDEX IN R
     446/    81F6 : 1F                           INC                 ; GET STATUS
     447/    81F7 : 84 DB                        BZ        STR1      ; INVALID CONTROL
     448/    81F9 :                     ;*NOW INPUT PARAMETERS IF ANY
     449/    81F9 : 29 81 39                     JMP       FECH
     450/    81FC : 03                  RTN      LR        A,QL
     451/    81FD : 5B                           LR        11,A      ; RESTORE R11
     452/    81FE :                     ;*TEST FOR 2 OR 3 PARAMETERS
     453/    81FE :                     ;*   MAKE LO ADDRESS START ON 8 BYTE BOUNDRY
     454/    81FE :                     ;*  MAKE HI ADDRESS END ON 8 BYTE BOUNDRY
     455/    81FE : 72                           LIS       2
     456/    81FF : F8                           NS        FCNT
     457/    8200 : 84 18                        BZ        RTN1      ; NOT 2 OR 3 PARA
     458/    8202 : 01                           LR        A,KL
     459/    8203 : 25 02                        CI        (X-A)
     460/    8205 : 94 04                        BNZ       NHX
     461/    8207 : 29 82 9A                     JMP       HEX
     462/    820A : 25 FC               NHX      CI        (V-A)
     463/    820C : 84 17                        BZ        MOVE
     464/    820E : 46                           LR        A,6
     465/    820F : 22 07                        OI        7
     466/    8211 : 56                           LR        6,A
     467/    8212 : 20 F8                        LI        H'F8'
     468/    8214 : F4                           NS        4
     469/    8215 : 54                           LR        4,A
     470/    8216 : 5B                           LR        11,A
     471/    8217 : 43                           LR        A,3
     472/    8218 : 5A                           LR        10,A
     473/    8219 :                     ;*CALC ADDRESS TO GET TO PROCESS ROUTINE
     474/    8219 : 01                  RTN1     LR        A,KL
     475/    821A : 24 B9                        AI        LOBY      ; LO 8 BIT ADDRES
     476/    821C : 05                           LR        KL,A
     477/    821D : 20 82                        LI        HIBY      ; HI 8 BIT ADDRES
     478/    821F : 19                           LNK
     479/    8220 : 04                           LR        KU,A
     480/    8221 : 09                           LR        P,K
 AS V1.42 Beta [Bld 239] - Source File FAIRBUG.ASM - Page 9 - 04/03/2023 01:42:09 PM


     481/    8222 : 02                           LR        A,QU      ; HI ADDRESS IF N
     482/    8223 : 1C                           POP
     483/    8224 :                     ;*MOVE MEMORY BLOCK
     484/    8224 :                     ;*  TO ACCOMPLISH,DO  MXXXX WHERE XXXX IS DE
     485/    8224 :                     ;*                    VSSSS-EEEE WHERE SSSS I
     486/    8224 :                     ;*              AND EEEE IS SOURCE ENDING ADD
     487/    8224 :                     ;*INPUT
     488/    8224 :                     ;*  R10-11  =DESTINATION START ADDRESS
     489/    8224 :                     ;*  R3-4     =SOURCE START ADDDRESS
     490/    8224 :                     ;*  R5-6    =SOURCE END ADDRESS
     491/    8224 :                     ;*WORK REGISTERS
     492/    8224 :                     ;*  R10-11   =CURRENT SOURCE BYTE ADDRESS
     493/    8224 :                     ;*  R5-6     =SOURCE START IF MOVING FROM END
     494/    8224 :                     ;*           =SOURCE END ADDRESS IF MOVE STAR
     495/    8224 : 4A                  MOVE     LR        A,10      ; DESTINATION HI
     496/    8225 : 18                           COM
     497/    8226 : 1F                           INC
     498/    8227 : C3                           AS        3         ; SOURCE START HI
     499/    8228 : 84 0B                        BZ        MBY2      ; EQUAL,TEST LO B
     500/    822A : 91 0F                        BM        MEND      ; MOVE BACKWARD
     501/    822C : 10                  MBGN     LR        DC,H
     502/    822D : 43                           LR        A,3
     503/    822E : 5A                           LR        10,A
     504/    822F : 44                           LR        A,4
     505/    8230 : 5B                           LR        11,A
     506/    8231 : 70                           LIS       0
     507/    8232 : 90 26                        BR        MCOM
     508/    8234 : 4B                  MBY2     LR        A,11
     509/    8235 : 18                           COM
     510/    8236 : 1F                           INC
     511/    8237 : C4                           AS        4
     512/    8238 : 81 F3                        BP        MBGN
     513/    823A :                     ;*CALC LENGTH OF BLOCK
     514/    823A : 43                  MEND     LR        A,3
     515/    823B : 18                           COM
     516/    823C : 51                           LR        1,A
     517/    823D : 44                           LR        A,4
     518/    823E : 18                           COM
     519/    823F : 1F                           INC
     520/    8240 : 1E                           LR        J,W
     521/    8241 : C6                           AS        6
     522/    8242 : 92 02                        BNC       MXX
     523/    8244 : 1E                           LR        J,W
     524/    8245 : CB                  MXX      AS        11
     525/    8246 : 5B                           LR        11,A
     526/    8247 : 41                           LR        A,1
     527/    8248 : 19                           LNK
     528/    8249 : 1D                           LR        W,J
     529/    824A : 19                           LNK
     530/    824B : C5                           AS        5
     531/    824C : CA                           AS        10
     532/    824D : 5A                           LR        10,A
     533/    824E :                     ;*MOVE TO DC THEN IMCREMENT TO ADD 1 TO LENG
     534/    824E : 10                           LR        DC,H
     535/    824F :                     ;*MOVE SOURCE START ADDRESS TO R10-11
     536/    824F : 45                           LR        A,5
     537/    8250 : 5A                           LR        10,A
     538/    8251 : 46                           LR        A,6
     539/    8252 : 5B                           LR        11,A
     540/    8253 :                     ;*NOW MOVE SOURCE START TO R5-6 FOR END COMPA
 AS V1.42 Beta [Bld 239] - Source File FAIRBUG.ASM - Page 10 - 04/03/2023 01:42:09 PM


     541/    8253 : 43                           LR        A,3
     542/    8254 : 55                           LR        5,A
     543/    8255 : 44                           LR        A,4
     544/    8256 : 56                           LR        6,A
     545/    8257 : 20 FE                        LI        -2        ; MEMORY ADDRESS
     546/    8259 : 57                  MCOM     LR        7,A
     547/    825A : 2C                           XDC
     548/    825B : 10                           LR        DC,H
     549/    825C : 11                  MLOP     LR        H,DC      ; SAVE ADDRESS FO
     550/    825D : 16                           LM
     551/    825E : 2C                           XDC
     552/    825F : 17                           ST
     553/    8260 : 47                           LR        A,7
     554/    8261 : 8E                           ADC
     555/    8262 : 2C                           XDC
     556/    8263 : 8E                           ADC
     557/    8264 :                     ;*COMPARE FOR ADDRESS END
     558/    8264 : 4A                           LR        A,10
     559/    8265 : E5                           XS        5
     560/    8266 : 94 F5                        BNZ       MLOP
     561/    8268 : 4B                           LR        A,11
     562/    8269 : E6                           XS        6
     563/    826A : 94 F1                        BNZ       MLOP
     564/    826C : 29 81 D1            BXX      JMP       STRT      ; ALL DONE
     565/    826F :                     ;*BREAKPOINT----STORE PK IN USER MEMORY +CHAN
     566/    826F :                     ;*              ADDTRSS IN FAIRBUG
     567/    826F :                     ;*GET BYTE FROM MEMORY AND SAVE ADDRESS AND
     568/    826F : 20 E0               BRAK     LI        H'E0'     ; SCRATCH MEM LO
     569/    8271 : 07                           LR        QL,A
     570/    8272 : 0F                           LR        DC,Q
     571/    8273 : 43                           LR        A,3
     572/    8274 : 5A                           LR        10,A
     573/    8275 : 17                           ST
     574/    8276 : 44                           LR        A,4
     575/    8277 : 5B                           LR        11,A
     576/    8278 : 17                           ST
     577/    8279 :                     ;*NOW FETCH USER BYTE
     578/    8279 : 2C                           XDC
     579/    827A : 10                           LR        DC,H
     580/    827B : 16                           LM
     581/    827C : 2C                           XDC
     582/    827D : 17                           ST
     583/    827E :                     ;*NOW STORE PK IN MEMORY
     584/    827E : 10                           LR        DC,H
     585/    827F : 7C                           LIS       12
     586/    8280 : 17                           ST
     587/    8281 :                     ;*NOW CHANGE USER K TO RESTORE ADDRESS
     588/    8281 : 20 FB                        LI        H'FB'
     589/    8283 : 07                           LR        QL,A
     590/    8284 : 0F                           LR        DC,Q
     591/    8285 : 20 80                        LI        H'80'
     592/    8287 : 17                           ST
     593/    8288 : 20 AF                        LI        H'AF'
     594/    828A : 17                           ST
     595/    828B : 90 E0                        BR        BXX       ; TO START
     596/    828D :                     ;*RESTORE BYTE TO USER MEMORY
     597/    828D : 20 E0               TT       LI        H'E0'
     598/    828F : 07                           LR        QL,A
     599/    8290 : 0F                           LR        DC,Q
     600/    8291 : 16                           LM
 AS V1.42 Beta [Bld 239] - Source File FAIRBUG.ASM - Page 11 - 04/03/2023 01:42:09 PM


     601/    8292 : 5A                           LR        10,A
     602/    8293 : 16                           LM
     603/    8294 : 5B                           LR        11,A
     604/    8295 : 16                           LM
     605/    8296 : 10                           LR        DC,H      ; USER ADDRESS
     606/    8297 : 17                           ST
     607/    8298 : 90 D3                        BR        BXX       ; TO START
     608/    829A :                     ;*HEX ARITHMETIC
     609/    829A : 49                  HEX      LR        A,9
     610/    829B : 25 2B                        CI        '+'
     611/    829D : 84 0B                        BZ        PLUS
     612/    829F :                     ;*COMPLIMENT BEFORE ADD=SUBTRACT
     613/    829F : 46                           LR        A,6
     614/    82A0 : 18                           COM
     615/    82A1 : 1F                           INC                 ; 2'S COMPLIMENT
     616/    82A2 : 1E                           LR        J,W
     617/    82A3 : 56                           LR        6,A
     618/    82A4 : 45                           LR        A,5
     619/    82A5 : 18                           COM
     620/    82A6 : 1D                           LR        W,J
     621/    82A7 : 19                           LNK
     622/    82A8 : 55                           LR        5,A
     623/    82A9 :                     ;*ADDITION
     624/    82A9 : 44                  PLUS     LR        A,4
     625/    82AA : C6                           AS        6
     626/    82AB : 54                           LR        4,A
     627/    82AC : 43                           LR        A,3
     628/    82AD : 19                           LNK
     629/    82AE : C5                           AS        5
     630/    82AF :                     ;*NOW WRITE TO DISPLAY RESULTS
     631/    82AF : 07                           LR        QL,A
     632/    82B0 : 28 81 1D                     PI        FOP2
     633/    82B3 : 44                           LR        A,4
     634/    82B4 : 07                           LR        QL,A
     635/    82B5 : 28 81 1D            V        PI        FOP2
     636/    82B8 : 90 B3                        BR        BXX
     637/    82BA :                     ;*PRINT ACCUMULATOR
     638/    82BA : 78                  A1       LIS       8
     639/    82BB : 90 5E               X        BR        I1
     640/    82BD :                     ;*CLEAR BREAK POINT ENTRY
     641/    82BD : 90 CF               T        BR        TT
     642/    82BF :                     ;*CHANGE LAST USED FIELD
     643/    82BF : 38                  C        DS        FCNT
     644/    82C0 : 91 F7                        BM        (V+3)     ; NO PARAMETERS S
     645/    82C2 : 49                           LR        A,FLG
     646/    82C3 : 10                           LR        DC,H
     647/    82C4 : 25 0C                        CI        OO        ; CK FOR PORT
     648/    82C6 : 94 04                        BNZ       C0        ; NOT PORT CHANGE
     649/    82C8 : 29 84 E6                     JMP       PORT      ; GO CHANGE PORT
     650/    82CB : 25 0D               C0       CI        PP
     651/    82CD : 91 0B                        BM        C2        ; REGISTER CHANGE
     652/    82CF : 94 03                        BNZ       C1        ; MEMORY CHANGE 1
     653/    82D1 : 43                           LR        A,3
     654/    82D2 : 17                           ST                  ; PC OR DC 1ST HA
     655/    82D3 : 44                  C1       LR        A,4
     656/    82D4 : 17                           ST
     657/    82D5 : 11                           LR        H,DC
     658/    82D6 : 4B                           LR        A,11
     659/    82D7 : 90 13                        BR        (C3+4)
     660/    82D9 : 4B                  C2       LR        A,11
 AS V1.42 Beta [Bld 239] - Source File FAIRBUG.ASM - Page 12 - 04/03/2023 01:42:09 PM


     661/    82DA : 0B                           LR        IS,A
     662/    82DB : 24 EF                        AI        H'EF'
     663/    82DD : 07                           LR        QL,A
     664/    82DE : 0F                           LR        DC,Q
     665/    82DF : 1F                           INC
     666/    82E0 : 44                           LR        A,4
     667/    82E1 : 81 04                        BP        C4
     668/    82E3 : 17                           ST
     669/    82E4 : 90 02                        BR        C3
     670/    82E6 : 5C                  C4       LR        S,A
     671/    82E7 : 4B                  C3       LR        A,11
     672/    82E8 : 1F                           INC
     673/    82E9 : 21 3F                        NI        H'3F'
     674/    82EB : 07                           LR        QL,A
     675/    82EC : 20 20               C5       LI        H'20'     ; BLANK
     676/    82EE : 51                           LR        CHRS,A
     677/    82EF : 28 85 93                     PI        TTYO
     678/    82F2 : 76                           LIS       (C-A)     ; TABLE VALUE OF
     679/    82F3 : 05                           LR        KL,A
     680/    82F4 : 29 81 F6                     JMP       (RPTC+1)
     681/    82F7 : 46                  C55      LR        A,6
     682/    82F8 : 07                           LR        QL,A
     683/    82F9 : 90 F2                        BR        C5
     684/    82FB :                     ;*DISPLAY DC
     685/    82FB : 5A                  D        LR        10,A      ; HI STORE ADDRES
     686/    82FC : 20 EB                        LI        H'EB'
     687/    82FE : 90 3F                        BR        P1
     688/    8300 :                     ;*EXAMINE THIS ADDRESS
     689/    8300 : 7D                  E        LIS       PP
     690/    8301 : E9                           XS        FLG
     691/    8302 : 84 40                        BZ        P2        ; PC OR DC
     692/    8304 : 90 2E                        BR        N1
     693/    8306 :                     ;*FORMATTED PUNCH,FOR BOOT LOAD INPUT
     694/    8306 : 29 80 36            F        JMP       FPUN
     695/    8309 :                     ;*GO TO
     696/    8309 : 38                  G        DS        FCNT
     697/    830A : 91 0A                        BM        G1
     698/    830C :                     ;*GET NEW PC FROM PARAMETERS
     699/    830C : 5A                           LR        10,A
     700/    830D : 20 E7                        LI        H'E7'
     701/    830F : 5B                           LR        11,A      ; SET PC MEMORY A
     702/    8310 : 10                           LR        DC,H
     703/    8311 : 43                           LR        A,3
     704/    8312 : 17                           ST                  ; PC UPPER
     705/    8313 : 44                           LR        A,4
     706/    8314 : 17                           ST                  ; PC LOWER
     707/    8315 : 29 80 E7            G1       JMP       REST      ; RESTORE REGISTE
     708/    8318 :                     ;*ISAR DISPLAY
     709/    8318 : 20 3C               I        LI        60        ; REGISTER OF ISA
     710/    831A : 54                  I1       LR        4,A
     711/    831B : 56                           LR        6,A
     712/    831C : 70                           LIS       0
     713/    831D : 53                           LR        3,A       ; SET T;O REGISTER
     714/    831E : 55                           LR        5,A
     715/    831F : 7F                           LIS       RR
     716/    8320 : 59                           LR        FLG,A
     717/    8321 : 90 65                        BR        R23
     718/    8323 :                     ;*HIGH SPEED READER LOAD ROUTINE
     719/    8323 : 29 84 51            H        JMP       HIGH
     720/    8326 :                     ;*PORT PRINT
 AS V1.42 Beta [Bld 239] - Source File FAIRBUG.ASM - Page 13 - 04/03/2023 01:42:09 PM


     721/    8326 : 7C                  O        LIS       OO        ; CODE FOR PORT
     722/    8327 : 90 3B                        BR        R1        ; PRINT PORT DATA
     723/    8329 :                     ;*BOOT LOAD
     724/    8329 : 29 84 46            L        JMP       LOAD
     725/    832C :                     ;*MEMORY PRINT
     726/    832C : 7A                  M        LIS       MM
     727/    832D : 90 35                        BR        R1
     728/    832F :                     ;*NEXT--DISPLAY NEXT MEMORY OR REGISTER LOC
     729/    832F : 10                  N        LR        DC,H
     730/    8330 : 71                           LIS       1
     731/    8331 : 8E                           ADC
     732/    8332 : 11                           LR        H,DC
     733/    8333 : 4A                  N1       LR        A,10
     734/    8334 : 53                           LR        3,A
     735/    8335 : 55                           LR        5,A
     736/    8336 : 4B                           LR        A,11
     737/    8337 : 54                           LR        4,A
     738/    8338 : 56                           LR        6,A
     739/    8339 : 90 36                        BR        R22
     740/    833B :                     ;*PC PRINTD
     741/    833B : 5A                  P        LR        10,A
     742/    833C : 20 E7                        LI        H'E7'
     743/    833E : C4                  P1       AS        4         ; ADD PC0 OR PC1
     744/    833F : C4                           AS        4         ; ADDRESS NOW +0
     745/    8340 : 5B                           LR        11,A
     746/    8341 : 7D                           LIS       PP
     747/    8342 : 59                           LR        FLG,A     ; SET TO P FOR 2
     748/    8343 : 10                  P2       LR        DC,H
     749/    8344 : 20 20                        LI        H'20'     ; BLANK
     750/    8346 : 51                           LR        CHRS,A
     751/    8347 : 28 85 93                     PI        TTYO
     752/    834A : 28 81 1B                     PI        FOP1      ; OP HEX WD,2 CHA
     753/    834D : 28 81 1B            POUT     PI        FOP1      ; OP HEX WD,2 CHA
     754/    8350 : 29 81 D1            P3       JMP       STRT
     755/    8353 :                     ;*S-FETCH STATUS REGISTER
     756/    8353 : 20 3E               S        LI        62        ; LOC OF STATUS S
     757/    8355 : 90 C4                        BR        I1
     758/    8357 :                     ;*PUNCH BINARY TAPE FOR PROM
     759/    8357 : 71                  B        LIS       1
     760/    8358 : 07                           LR        QL,A
     761/    8359 : 90 73                        BR        PPUN
     762/    835B :                     ;*8 BIT PROM ENTRY
     763/    835B : 70                  J        LIS       0         ; CODE FOR 8 BIT=
     764/    835C : 90 FB                        BR        (B+1)
     765/    835E :                     ;*BREAKPOINT ENTRY FROM TABLE
     766/    835E : 29 82 6F            U        JMP       BRAK      ; TEMP NOP
     767/    8361 :                     ;*R-ENTRY FOR REGISTER DISPLAY
     768/    8361 : 20 0F               R        LI        RR
     769/    8363 : 59                  R1       LR        FLG,A     ; SET TO R OR M
     770/    8364 : 38                           DS        FCNT
     771/    8365 : 91 EA                        BM        P3        ; NO PARAMETERS G
     772/    8367 : 94 05                        BNZ       R2
     773/    8369 :                     ;*MAKE HI ADDR=LO ADDR
     774/    8369 : 43                  R3       LR        A,3
     775/    836A : 55                           LR        5,A
     776/    836B : 44                           LR        A,4
     777/    836C : 56                           LR        6,A
     778/    836D :                     ;*PRINT CR LF BLANK BLANK (R OR M) BLANK XXXX
     779/    836D : 28 85 78            R2       PI        TTCR      ; WRITE CR/LF
     780/    8370 : 20 20               R22      LI        H'20'     ; BLANK
 AS V1.42 Beta [Bld 239] - Source File FAIRBUG.ASM - Page 14 - 04/03/2023 01:42:09 PM


     781/    8372 : 51                           LR        CHRS,A
     782/    8373 : 28 85 93                     PI        TTYO
     783/    8376 : 49                           LR        A,FLG
     784/    8377 : 24 43                        AI        H'43'
     785/    8379 : 51                           LR        CHRS,A
     786/    837A : 28 85 93                     PI        TTYO
     787/    837D : 43                           LR        A,3       ; START LO ADDRES
     788/    837E : 07                           LR        QL,A
     789/    837F : 28 81 1D                     PI        FOP2
     790/    8382 : 44                           LR        A,4
     791/    8383 : 07                           LR        QL,A
     792/    8384 : 28 81 1D                     PI        FOP2
     793/    8387 : 20 3D               R23      LI        '='
     794/    8389 : 51                           LR        CHRS,A
     795/    838A : 28 85 93                     PI        TTYO
     796/    838D :                     ;*NOW PRINT DATA
     797/    838D : 43                  R4       LR        A,3
     798/    838E : 5A                           LR        10,A
     799/    838F : 44                           LR        A,4
     800/    8390 : 5B                           LR        11,A
     801/    8391 : 49                           LR        A,FLG
     802/    8392 : 25 0C                        CI        OO        ; PORT?
     803/    8394 : 84 60                        BZ        PIO       ; GO TO PORT ROUT
     804/    8396 : 25 0F                        CI        RR        ; TEST FOR REGIST
     805/    8398 : 94 14                        BNZ       R5        ; MEMORY LOC
     806/    839A :                     ;*
     807/    839A :                     ;*REGISRER FETCH IS IT IN SCRATCH OR TEMP MEM
     808/    839A : 44                           LR        A,4
     809/    839B : 0B                           LR        IS,A
     810/    839C : 0A                           LR        A,IS
     811/    839D : 25 0F                        CI        15
     812/    839F : 81 08                        BP        R44       ; NOY REGISTER AD
     813/    83A1 :                     ;*LOAD ISAR AND FETCH
     814/    83A1 : 4C                           LR        A,S
     815/    83A2 : 07                           LR        QL,A
     816/    83A3 : 28 81 1D            R76      PI        FOP2
     817/    83A6 : 90 0A                        BR        R77
     818/    83A8 :                     ;*UPDATE REG 0-15 ADDRESS TO MEM LOC
     819/    83A8 : 24 EF               R44      AI        H'EF'     ; LO RAM-START OF
     820/    83AA : 5B                           LR        11,A
     821/    83AB : 02                           LR        A,QU      ; HI ADDRESS
     822/    83AC : 5A                           LR        10,A      ; HI RAM ADDRESS
     823/    83AD :                     ;*FETCH DATA FROM MEMORY
     824/    83AD : 10                  R5       LR        DC,H
     825/    83AE :                     ;*DATA NOW IN NOW PRINT
     826/    83AE : 28 81 1B            R6       PI        FOP1      ; TYPE 2 CHAR FRO
     827/    83B1 : 20 20               R77      LI        H'20'     ; BLANK
     828/    83B3 : 51                           LR        CHRS,A
     829/    83B4 : 28 85 93                     PI        TTYO      ; BLANK
     830/    83B7 :                     ;*CHECK FOR END
     831/    83B7 : 44                           LR        A,4
     832/    83B8 : 5B                           LR        11,A      ; SAVE FOR REENTR
     833/    83B9 : E6                           XS        6
     834/    83BA : 43                           LR        A,3
     835/    83BB : 5A                           LR        10,A      ; SAVE FOR REENTR
     836/    83BC : 94 04                        BNZ       R7
     837/    83BE : E5                           XS        5
     838/    83BF : 84 90                        BZ        P3
     839/    83C1 : 44                  R7       LR        A,4
     840/    83C2 :                     ;*UPDATE FOR NEXT WORD,LINE HAS MAX OF 8
 AS V1.42 Beta [Bld 239] - Source File FAIRBUG.ASM - Page 15 - 04/03/2023 01:42:09 PM


     841/    83C2 : 1F                           INC
     842/    83C3 : 54                           LR        4,A       ; INCREMENT ADDRE
     843/    83C4 : 43                           LR        A,3
     844/    83C5 : 19                           LNK
     845/    83C6 : 53                           LR        3,A       ; INCR HI ADDRESS
     846/    83C7 : 77                           LIS       7
     847/    83C8 : F4                           NS        4
     848/    83C9 : 84 A3                        BZ        R2        ; NEW LINE
     849/    83CB : 90 C1                        BR        R4        ; CONTINUE THIS L
     850/    83CD :                     ;*PUNCH HEADER,THEN 256 X SIZE. HI 4 BITS,
     851/    83CD :                     ;*  THEN HEADWE 256X SIZE LO BITS.
     852/    83CD :                     ;*  CONTINUE ALTERNATING AS ABOVE UNTIL LAST
     853/    83CD :                     ;*  HFLG INITIALLY=SIZE,WHEN=0 PUNCH LEADER,W
     854/    83CD : 70                  PPUN     LIS       0
     855/    83CE : 5B                           LR        11,A      ; LOW DC ADDRESS
     856/    83CF : 20 92                        LI        H'92'
     857/    83D1 : 51                           LR        CHRS,A
     858/    83D2 : 28 85 93                     PI        TTYO
     859/    83D5 : 73                  PPA      LIS       3
     860/    83D6 : 58                           LR        HFLG,A    ; NEG SIZE MINUS
     861/    83D7 : F7                           NS        SIZE      ; MASK HI BITS
     862/    83D8 : 57                           LR        SIZE,A
     863/    83D9 : 43                  PPB      LR        A,SA
     864/    83DA : 5A                           LR        10,A
     865/    83DB : 10                           LR        DC,H
     866/    83DC : 47                           LR        A,SIZE    ; LENGTH OF BLOCK
     867/    83DD : 54                           LR        4,A
     868/    83DE : 20 30               PBLK     LI        H'30'     ; SCRATCH MEMORY
     869/    83E0 : 56                           LR        XFLG,A
     870/    83E1 : 70                  PLP      LIS       0
     871/    83E2 : 51                           LR        CHRS,A
     872/    83E3 : 28 85 93                     PI        TTYO      ; WRITE BLANK
     873/    83E6 : 36                           DS        XFLG
     874/    83E7 : 94 F9                        BNZ       PLP       ; CONTINUE BLANKS
     875/    83E9 :                     ;*CHECK FOR DONE
     876/    83E9 : 38                           DS        HFLG
     877/    83EA : 81 28                        BP        PPC
     878/    83EC :                     ;*****DONE******
     879/    83EC : 20 94                        LI        H'94'
     880/    83EE : 51                           LR        CHRS,A
     881/    83EF : 28 85 93            PLXX     PI        TTYO      ; PUNCH OFF
     882/    83F2 : 29 80 AE                     JMP       BGSV
     883/    83F5 :                     ;*POR T DISPLAY
     884/    83F5 : 20 E0               PIO      LI        H'E0'     ; SCRATCH MEMORY
     885/    83F7 : 07                           LR        QL,A
     886/    83F8 : 0F                           LR        DC,Q      ; SCRATCH MEMORY
     887/    83F9 : 44                           LR        A,4       ; PORT ADDRESS
     888/    83FA : 25 0F                        CI        15        ; SHORT PORT ADDR
     889/    83FC : 82 12                        BC        INS       ; BUILD INS INSTR
     890/    83FE : 20 26                        LI        H'26'     ; LONG INPUT
     891/    8400 : 17                           ST
     892/    8401 : 44                           LR        A,4       ; PORT ADDRESS
     893/    8402 : 17                           ST
     894/    8403 : 77                  PXX      LIS       7
     895/    8404 : 17                           ST
     896/    8405 : 20 29                        LI        H'29'     ; JMP INST
     897/    8407 : 17                           ST
     898/    8408 : 20 83                        LI        H'83'     ; HI ADDRESS
     899/    840A : 17                           ST
     900/    840B : 20 A3                        LI        H'A3'
 AS V1.42 Beta [Bld 239] - Source File FAIRBUG.ASM - Page 16 - 04/03/2023 01:42:09 PM


     901/    840D : 17                           ST
     902/    840E : 0D                           LR        P0,Q      ; GO EXECUTE
     903/    840F :                     ;*SHORT INS
     904/    840F : 24 A0               INS      AI        H'A0'
     905/    8411 : 90 F0                        BR        (PXX-1)
     906/    8413 :                     ;*OUTPUT 2 RUBOUTS,REGISTER CHRS HAS -1 AFTE
     907/    8413 :                     ;*    RETURN FROM TTYO OF BLANKS
     908/    8413 :                     ;* PUNCH BLOCK OF 256
     909/    8413 : 70                  PPC      LIS       0
     910/    8414 : 56                           LR        XFLG,A
     911/    8415 : 03                           LR        A,QL
     912/    8416 : E6                           XS        XFLG
     913/    8417 : 84 20                        BZ        EGHT      ; 8 BIT FORMAT
     914/    8419 : 48                  PUNL     LR        A,HFLG
     915/    841A : F8                           NS        HFLG
     916/    841B : 16                           LM
     917/    841C : 94 02                        BNZ       $+3
     918/    841E : 15                           SL        4         ; TO HI 4 BITS
     919/    841F : 14                           SR        4         ; TO LO 4 BITS
     920/    8420 : 23 4F                        XI        H'4F'
     921/    8422 : 51                           LR        CHRS,A
     922/    8423 : 28 85 93                     PI        TTYO
     923/    8426 : 36                           DS        XFLG
     924/    8427 : 94 F1                        BNZ       PUNL
     925/    8429 :                     ;*CHECK FOR LENGTH GREATER THAN 256
     926/    8429 : 34                           DS        4         ; NO PAGES/BLOCK
     927/    842A : 81 E8                        BP        PPC       ; NEXT 256
     928/    842C :                     ;*CHECK IF LOW BYTES ALREADY DONE
     929/    842C : 38                           DS        HFLG
     930/    842D : 81 AB                        BP        PPB       ; GO DO LOW BYTES
     931/    842F :                     ;*UPDATE TO NEXT PAGE
     932/    842F : 43                  PONT     LR        A,SA
     933/    8430 : 1F                           INC
     934/    8431 : C7                           AS        SIZE
     935/    8432 : 53                           LR        SA,A
     936/    8433 : E5                           XS        EA        ; END PAGE
     937/    8434 : 84 A9                        BZ        PBLK      ; DO TRAILER
     938/    8436 : 90 9E                        BR        PPA       ; START NEXT HI B
     939/    8438 :                     ;*8 BIT FORMAT
     940/    8438 : 16                  EGHT     LM
     941/    8439 : 51                           LR        CHRS,A
     942/    843A : 28 85 93                     PI        TTYO      ; OUTPUT BYTE
     943/    843D : 36                           DS        XFLG
     944/    843E : 94 F9                        BNZ       EGHT      ; NEXT BYTE
     945/    8440 : 34                           DS        4         ; PAGES PER BLOCK
     946/    8441 : 81 D1                        BP        PPC       ; START NEXT BLOC
     947/    8443 : 58                           LR        HFLG,A
     948/    8444 : 90 EA                        BR        PONT      ; NEXT PAGE
     949/    8446 :                     ;*  START OF BOOT LOADER
     950/    8446 : 20 91               LOAD     LI        H'91'     ; READER ON COMMA
     951/    8448 : 51                           LR        CHRS,A    ; PASS IT
     952/    8449 : 28 85 93                     PI        TTYO      ; AND TYPE IT
     953/    844C : 2A 85 53                     DCI       TTYI      ; SERIAL INPUT PR
     954/    844F : 90 0C                        BR        BOT1      ; SKIP OVER PARAL
     955/    8451 : 2A 85 3D            HIGH     DCI       PINP
     956/    8454 : 70                           LIS       0
     957/    8455 : B9                  SLF1     OUTS      PPRT      ; INITIALIZE PARA
     958/    8456 : B8                           OUTS      PSTS      ; INIT CONTROL PO
     959/    8457 : A8                           INS       PSTS
     960/    8458 : 12                           SR        1
 AS V1.42 Beta [Bld 239] - Source File FAIRBUG.ASM - Page 17 - 04/03/2023 01:42:09 PM


     961/    8459 : 15                           SL        4
     962/    845A : 91 FA                        BM        SLF1      ; LOCK IN LOOP TI
     963/    845C : 70                  BOT1     LIS       0
     964/    845D : 56                           LR        XFLG,A    ; CLEAR FIRST X D
     965/    845E : 0E                           LR        Q,DC      ; SET TO TTYI OR
     966/    845F : 57                           LR        CKSM,A
     967/    8460 : 28 85 3C            IDLE     PI        CHAR      ; GET HEADER CHAR
     968/    8463 : 13                           SL        1         ; CLEAR PARITY BI
     969/    8464 : 12                           SR        1
     970/    8465 : 25 3A                        CI        H'3A'     ; COLON
     971/    8467 : 84 4F                        BZ        FORM      ; FORMULATOR FORM
     972/    8469 : 25 53                        CI        'S'       ; IS IT AN LOAD A
     973/    846B : 84 31                        BZ        SETA
     974/    846D : 25 2A                        CI        '*'       ; IS IT THE END O
     975/    846F : 84 38                        BZ        ENDX
     976/    8471 : 23 58                        XI        'X'       ; WELL, IF IT ISN
     977/    8473 : 94 EC                        BNZ       IDLE
     978/    8475 :                     ;******   HAVE THE START OF A DATA LINE   ***
     979/    8475 : 57                  DATA     LR        CKSM,A    ; INITIUALIZE CHK
     980/    8476 : 78                           LIS       H'08'
     981/    8477 : 55                           LR        CCNT,A    ; INITIALIZE BYTE
     982/    8478 : 56                           LR        XFLG,A    ; SHOW THAT X HAS
     983/    8479 : 28 85 15            CONT     PI        BYTE
     984/    847C : 17                           ST                  ; STORE THE BYTE
     985/    847D : 35                           DS        CCNT
     986/    847E : 94 FA                        BNZ       CONT
     987/    8480 : 28 85 3C                     PI        CHAR      ; GET CHK CHAR FR
     988/    8483 : 21 3F                        NI        H'3F'     ; MASK TO SIX BIT
     989/    8485 : 24 D0                        AI        H'D0'     ; ASCII CONVERT--
     990/    8487 : 82 03                        BC        $+4       ; CARRY IF IT WAS
     991/    8489 : 24 39                        AI        H'39'     ; FINISH CONVERSI
     992/    848B : E7                           XS        CKSM      ; MAKE THE COMPAR
     993/    848C : 15                           SL        4         ; LO 4 BITS TO HI
     994/    848D : 84 D2                        BZ        IDLE      ; IF OK, LET'S GE
     995/    848F :                     ;**********     CHK SUM ERROR HALT   ********
     996/    848F : 20 43               SLF2     LI        'C'
     997/    8491 : 51                           LR        CHRS,A
     998/    8492 : 28 85 93                     PI        TTYO
     999/    8495 : 20 4B                        LI        'K'
    1000/    8497 : 51                           LR        CHRS,A
    1001/    8498 : 28 85 93                     PI        TTYO
    1002/    849B : 90 0F                        BR        STPP
    1003/    849D : 28 85 15            SETA     PI        BYTE      ; GET NEW LOAD AD
    1004/    84A0 : 5A                           LR        10,A
    1005/    84A1 : 28 85 15                     PI        BYTE
    1006/    84A4 : 5B                           LR        11,A
    1007/    84A5 : 10                           LR        DC,H      ; SET THE ADDRESS
    1008/    84A6 : 90 B9                        BR        IDLE
    1009/    84A8 : F6                  ENDX     NS        XFLG      ; HAVE AN *, BUT
    1010/    84A9 : 84 B6                        BZ        IDLE      ; MUST BE ONLY AT
    1011/    84AB :                     ;*                            WAS 2A+0 OR 2A
    1012/    84AB :                     ;*********    HALT LOOP FOR WHEN FINISHED  **
    1013/    84AB : 20 93               STPP     LI        H'93'     ; READER OFF COMM
    1014/    84AD : 51                           LR        CHRS,A    ; PASS
    1015/    84AE : 29 83 EF            SLF3     JMP       PLXX
    1016/    84B1 : 2B                           NOP
    1017/    84B2 : 2B                           NOP
    1018/    84B3 : 2B                           NOP
    1019/    84B4 : 2B                           NOP
    1020/    84B5 : 2B                           NOP
 AS V1.42 Beta [Bld 239] - Source File FAIRBUG.ASM - Page 18 - 04/03/2023 01:42:09 PM


    1021/    84B6 : 2B                           NOP
    1022/    84B7 : 70                  FORM     LIS       0
    1023/    84B8 : 57                           LR        CKSM,A    ; ZERO CKSM TO START
    1024/    84B9 : 18                           COM
    1025/    84BA : 56                           LR        XFLG,A
    1026/    84BB : 28 85 15                     PI        BYTE      ; LENGTH OF BLOCK
    1027/    84BE : 55                           LR        CCNT,A
    1028/    84BF : F5                  XS       NS        CCNT
    1029/    84C0 : 84 EA                        BZ        STPP      ; ZERO RECORD IS
    1030/    84C2 : 28 85 15                     PI        BYTE      ; ADDRESS HI
    1031/    84C5 : 5A                           LR        10,A
    1032/    84C6 : 28 85 15                     PI        BYTE      ; ADDRESS LO
    1033/    84C9 : 5B                           LR        11,A
    1034/    84CA : 10                           LR        DC,H
    1035/    84CB : 28 85 15                     PI        BYTE      ; CODE BYTE
    1036/    84CE : FB                           NS        CHR1
    1037/    84CF : 94 90                        BNZ       IDLE      ; NOT DATA RECORD
    1038/    84D1 : 28 85 15            FMLP     PI        BYTE      ; DATA FETCH
    1039/    84D4 : 17                           ST
    1040/    84D5 : 35                           DS        CCNT      ; LENGTH
    1041/    84D6 : 94 FA                        BNZ       FMLP      ; LOOP FOR MORE D
    1042/    84D8 : 2B                           NOP
    1043/    84D9 : 2B                           NOP
    1044/    84DA : 2B                           NOP
    1045/    84DB : 2B                           NOP
    1046/    84DC : 28 85 15                     PI        BYTE      ; FETCH CKSM
    1047/    84DF : 47                           LR        A,CKSM
    1048/    84E0 : F7                           NS        CKSM      ; SHOULD BE ZERO
    1049/    84E1 : 94 AD                        BNZ       SLF2      ; CKSM ERROR
    1050/    84E3 : 29 84 60                     JMP       IDLE      ; GET NEXT BLOCK
    1051/    84E6 :                     ;*PORT CHANGE ROUTINE
    1052/    84E6 : 20 DF               PORT     LI        H'DF'
    1053/    84E8 : 07                           LR        QL,A
    1054/    84E9 : 0F                           LR        DC,Q
    1055/    84EA : 46                           LR        A,6
    1056/    84EB : 5B                           LR        11,A
    1057/    84EC : 25 0F                        CI        15
    1058/    84EE : 82 1A                        BC        OUTS      ; DO SHORT OUTS
    1059/    84F0 : 20 27                        LI        H'27'
    1060/    84F2 : 17                           ST
    1061/    84F3 : 46                           LR        A,6
    1062/    84F4 : 17                           ST
    1063/    84F5 : 20 44                        LI        H'44'
    1064/    84F7 : 17                           ST
    1065/    84F8 : 20 27                        LI        H'27'
    1066/    84FA : 17                           ST
    1067/    84FB : 46                           LR        A,6
    1068/    84FC : 17                  JMP      ST
    1069/    84FD : 20 29                        LI        H'29'
    1070/    84FF : 17                           ST
    1071/    8500 : 20 82                        LI        H'82'
    1072/    8502 : 17                           ST
    1073/    8503 : 20 F7                        LI        H'F7'     ; TO C55'
    1074/    8505 : 17                           ST
    1075/    8506 : 20 00                        LI        0
    1076/    8508 : 0D                           LR        P0,Q      ; NOW EXECUTE
    1077/    8509 : 24 B0               OUTS     AI        H'B0'
    1078/    850B : 17                           ST
    1079/    850C : 20 44                        LI        H'44'
    1080/    850E : 17                           ST
 AS V1.42 Beta [Bld 239] - Source File FAIRBUG.ASM - Page 19 - 04/03/2023 01:42:09 PM


    1081/    850F : 20 B0                        LI        H'B0'
    1082/    8511 : C6                           AS        6
    1083/    8512 : 90 E9                        BR        JMP
    1084/    8514 : 2B                           NOP
    1085/    8515 :                     ;***GET A BYTE****
    1086/    8515 :                     ;***       GETS THE BYTE,CONVERTS,AND ADDS TO
    1087/    8515 : 08                  BYTE     LR        K,P       ; SAVE PC1
    1088/    8516 : 72                           LIS       2
    1089/    8517 : 58                           LR        HFLG,A    ; SET THE HALF FL
    1090/    8518 : 4B                  AGAN     LR        A,CHR1
    1091/    8519 : 15                           SL        4
    1092/    851A : 5B                           LR        CHR1,A
    1093/    851B : 28 85 3C                     PI        CHAR
    1094/    851E : 21 3F                        NI        H'3F'     ; MASK TO 6 BITS
    1095/    8520 : 24 D0                        AI        H'D0'     ; ASCII CONVERT--
    1096/    8522 : 82 03                        BC        $+4
    1097/    8524 : 24 39                        AI        H'39'     ; NEXT CLEAN UP A
    1098/    8526 : CB                           AS        CHR1
    1099/    8527 : 5B                           LR        CHR1,A    ; TEMP STORE
    1100/    8528 : 46                           LR        A,XFLG
    1101/    8529 : F6                           NS        XFLG      ; TEST FOR NEGATI
    1102/    852A : 91 04                        BM        AEND      ; NEGATIVE=FORMUL
    1103/    852C : 4B                           LR        A,CHR1
    1104/    852D : C7                           AS        CKSM      ; ADD NEW CHAR TO
    1105/    852E : 57                           LR        CKSM,A
    1106/    852F : 38                  AEND     DS        HFLG      ; DECREMENT HALF
    1107/    8530 : 94 E7                        BNZ       AGAN      ; GET 2ND HALF
    1108/    8532 : 46                           LR        A,XFLG
    1109/    8533 : F6                           NS        XFLG
    1110/    8534 : 81 04                        BP        ADON      ; IF FORMULATOR
    1111/    8536 : 47                           LR        A,CKSM
    1112/    8537 : CB                           AS        CHR1
    1113/    8538 : 57                           LR        CKSM,A
    1114/    8539 : 4B                  ADON     LR        A,CHR1    ; ONLY HAVE UPPER
    1115/    853A : 09                           LR        P,K       ; RESTORE PC1
    1116/    853B : 1C                           POP
    1117/    853C :                     ;********     PARALLEL AND SERIAL INPUT ROUTI
    1118/    853C :                     ;**      COMMON CALL IS A PUSH TO CHAR
    1119/    853C :                     ;**      CHAR USES Q TO JUMP TO APPROPRIATE R
    1120/    853C : 0D                  CHAR     LR        P0,Q      ; JUMP TO INPUT R
    1121/    853D :                     ;**   PINP:  GET A CHARACTER FROM PORT 4
    1122/    853D :                     ;**    TYPICALLY USED WITH TAPE READER, BUT H
    1123/    853D :                     ;**    DISCIPLINE THAT IS APPLICABLE TO OTHER
    1124/    853D :                     ;**    LOOKS FOR A CHARACTER READY INPUT, AND
    1125/    853D :                     ;**    CHARACTER. NEXT CPU GIVES AN ADVANCE P
    1126/    853D :                     ;**    AFTER THE DEVICE READY INPUT GOES NOT
    1127/    853D : A8                  PINP     INS       PSTS      ; GET A CHAR FROM
    1128/    853E : 13                           SL        1
    1129/    853F : 91 FD                        BM        PINP      ; LOOK FOR SPOCKE
    1130/    8541 : 7F                           LIS       H'0F'     ; 100 US DELAY AF
    1131/    8542 : 18                           COM
    1132/    8543 : 1F                  PDLY     INC
    1133/    8544 : 94 FE                        BNZ       PDLY
    1134/    8546 : A9                           INS       PPRT      ; AND NOW GET DAT
    1135/    8547 : 18                           COM
    1136/    8548 : 51                           LR        CHRS,A    ; TEMP STORE CNEW
    1137/    8549 : 79                           LIS       9         ; ADVANCE READER
    1138/    854A : B8                           OUTS      PSTS
    1139/    854B : A8                  NOSP     INS       PSTS      ; GET READER STAT
    1140/    854C : 13                           SL        1
 AS V1.42 Beta [Bld 239] - Source File FAIRBUG.ASM - Page 20 - 04/03/2023 01:42:09 PM


    1141/    854D : 81 FD                        BP        NOSP      ; AND LOOK
    1142/    854F : 71                           LIS       1
    1143/    8550 : B8                           OUTS      PSTS      ; REMOVE DRIVE PU
    1144/    8551 : 41                           LR        A,CHRS    ; PICK BACK UP TH
    1145/    8552 : 1C                           POP
    1146/    8553 :                     ;***TTYI: SERIAL I/P           CHARACTER RETU
    1147/    8553 :                     ;**   REG BCNT HOLDS BIT COUNT   REG CHRS HOL
    1148/    8553 : A8                  TTYI     INS       IPOR
    1149/    8554 : 91 FE                        BM        TTYI      ; LOOK FOR START
    1150/    8556 : 40                           LR        A,BAUD    ; GET DELAY COUNT
    1151/    8557 : 90 01               DLY3     BR        $+2       ; SILLY BRANCH FO
    1152/    8559 : 24 01                        AI        H'01'
    1153/    855B : 94 FB                        BNZ       DLY3      ; THIS LOOP OS HA
    1154/    855D : A8                           INS       IPOR      ; CHECK START BIT
    1155/    855E : 91 F4                        BM        TTYI
    1156/    8560 : 79                  TTD      LIS       9
    1157/    8561 : 52                           LR        BCNT,A    ; SET BIT COUNT,9
    1158/    8562 : 21 80               LOOP     NI        H'80'     ; MASK TO GET INP
    1159/    8564 : C1                           AS        CHRS      ; (LD'G START BIT
    1160/    8565 : 32                           DS        BCNT
    1161/    8566 : 91 10                        BM        STOP      ; NEG IF LOOKING
    1162/    8568 : 84 02                        BZ        LOP2      ; IF LAST BIT, DO
    1163/    856A : 12                  LOP3     SR        1         ; SHIFT ASSEMBLED
    1164/    856B : 51                  LOP2     LR        CHRS,A    ; STORE ASSEMBLED
    1165/    856C : 40                           LR        A,BAUD    ; START OF FULL B
    1166/    856D : BB                  DLY4     OUTS      NUSE      ; NOP FOR DELAY
    1167/    856E : BB                           OUTS      NUSE
    1168/    856F : BB                           OUTS      NUSE
    1169/    8570 : 24 01                        AI        H'01'     ; INCR WITH A 5US
    1170/    8572 : 94 FA                        BNZ       DLY4
    1171/    8574 : A8                           INS       IPOR      ; GET NEW BIT
    1172/    8575 : 90 EC                        BR        LOOP
    1173/    8577 : 1C                  STOP     POP
    1174/    8578 :                     ;******* SERIAL OUTPUT ROUTINE  ***********
    1175/    8578 :                     ;**  HAS 1 START, 8 DATA, 2 STOP. USES PORT 0
    1176/    8578 :                     ;**  BAUD RATE IS SET BY A DELAY COUNT IN REG
    1177/    8578 :                     ;**   CALL BY PUTTING CHAR IN REG CHRS, AND S
    1178/    8578 :                     ;**   ROUTINE RETURNS WITH ALL 1'S IN REG CHR
    1179/    8578 : 08                  TTCR     LR        K,P
    1180/    8579 : 7D                           LIS       CR
    1181/    857A : 51                           LR        CHRS,A
    1182/    857B : 28 85 93                     PI        TTYO
    1183/    857E : 7A                           LIS       LF
    1184/    857F : 51                           LR        CHRS,A
    1185/    8580 : 28 85 93                     PI        TTYO
    1186/    8583 : 28 85 93                     PI        TTYO
    1187/    8586 : 28 85 93                     PI        TTYO
    1188/    8589 : 28 85 93                     PI        TTYO
    1189/    858C : 28 85 93                     PI        TTYO
    1190/    858F : 28 85 93                     PI        TTYO
    1191/    8592 : 0C                           PK                  ; RETURN
    1192/    8593 : 7B                  TTYO     LIS       H'0B'
    1193/    8594 : 52                           LR        BCNT,A    ; SET BIT COUNT F
    1194/    8595 : 70                           LIS       0
    1195/    8596 : B8                           OUTS      OPOR      ; OUTPUT START BI
    1196/    8597 :                     ;***   DELAY ROUTINE-- 3.3MS FOR 300 BAUD, 9
    1197/    8597 : 40                  DLY1     LR        A,BAUD    ; GET DELAY COUNT
    1198/    8598 : BB                  DLY2     OUTS      NUSE      ; NOP FOR DELAY
    1199/    8599 : BB                           OUTS      NUSE
    1200/    859A : BB                           OUTS      NUSE
 AS V1.42 Beta [Bld 239] - Source File FAIRBUG.ASM - Page 21 - 04/03/2023 01:42:09 PM


    1201/    859B : 24 01                        AI        H'01'     ; INCR WITH A 5 U
    1202/    859D : 94 FA                        BNZ       DLY2
    1203/    859F : 32                           DS        BCNT
    1204/    85A0 : 94 02                        BNZ       DLY5      ; NOW NEXT BI
    1205/    85A2 : 1C                           POP                 ; ALL FINI,BACK T
    1206/    85A3 : 71                  DLY5     LIS       1         ; GET CHARACTER
    1207/    85A4 : F1                           NS        CHRS      ; MASK OFF ALL BU
    1208/    85A5 : B8                           OUTS      OPOR      ; OUTPUT THE MEW
    1209/    85A6 : 41                           LR        A,CHRS    ; NOW SHIFT THE C
    1210/    85A7 : 12                           SR        1
    1211/    85A8 : 24 80                        AI        H'80'     ; FILL,WITH 1'S F
    1212/    85AA : 51                           LR        CHRS,A
    1213/    85AB :                     ;*
    1214/    85AB : 90 EB               EDUX     BR        DLY1      ; NOW DELAY,THEN
    1215/    85AD :                     ;*
    1216/    85AD :                     ;*
    1217/    85AD :                     ;* EDUCATOR INITIALIZATION
    1218/    85AD :                     ;*
    1219/    85AD : 70                  EDUC     LIS       0         ; CLEAR INTERRUPT PORTS
    1220/    85AE : 52                           LR        2,A       ; CLEAR STORE MODE FLAG
    1221/    85AF : 20 7F                        LI        H'7F'
    1222/    85B1 : B0                           OUTS      0
    1223/    85B2 : 67                           LISU      7
    1224/    85B3 : 68                           LISL      0
    1225/    85B4 : 1F                           INC
    1226/    85B5 : 5D                           LR        I,A
    1227/    85B6 : 02                           LR        A,QU      ; SAVE QU FOR RETURN TO FAIR-
    1228/    85B7 : 5E                           LR        D,A
    1229/    85B8 :                     ;* LOAD ZEROES INTO ADDRESS DISPLAY AND DC
    1230/    85B8 : 66                  A9       LISU      6
    1231/    85B9 : 6B                           LISL      3
    1232/    85BA : 70                           LIS       0
    1233/    85BB : 5E                  A20      LR        D,A
    1234/    85BC : 8F FE                        BR7       A20
    1235/    85BE : 74                           LIS       4
    1236/    85BF : 57                           LR        7,A
    1237/    85C0 :                     ;* LOAD MEMORY TO DATA DISPLAY
    1238/    85C0 : 2A 00 00                     DCI       0
    1239/    85C3 : 0E                           LR        Q,DC
    1240/    85C4 : 28 87 13                     PI        MTDD
    1241/    85C7 :                     ;* SCAN KEYBOARD
    1242/    85C7 : 28 87 31            A3       PI        SCAN
    1243/    85CA : 20 12                        LI        H'12'
    1244/    85CC : E0                           XS        0
    1245/    85CD : 84 17                        BZ        A38       ; BRANCH IF IA KEY
    1246/    85CF : 24 FE                        AI        H'FE'     ; WAS IT H'10'
    1247/    85D1 : 84 13                        BZ        A38       ; BRANCH IF DA KEY
    1248/    85D3 : 76                           LIS       6
    1249/    85D4 : 56                           LR        6,A       ; LOAD DELAY TIME FOR REPEAT
    1250/    85D5 : 20 20                        LI        H'20'
    1251/    85D7 : 55                           LR        5,A       ; LOAD FIRST DELAY TIME FOR R
    1252/    85D8 : 40                           LR        A,0
    1253/    85D9 : 1F                           INC
    1254/    85DA : 94 EC                        BNZ       A3        ; BRANCH IF KEY STILL DOWN
    1255/    85DC : 28 87 31            A5       PI        SCAN
    1256/    85DF : 40                           LR        A,0
    1257/    85E0 : 1F                           INC
    1258/    85E1 : 84 FA                        BZ        A5        ; BRANCH IF NO KEYS
    1259/    85E3 : 90 0E                        BR        A54
    1260/    85E5 : E5                  A38      XS        5
 AS V1.42 Beta [Bld 239] - Source File FAIRBUG.ASM - Page 22 - 04/03/2023 01:42:09 PM


    1261/    85E6 : 84 04                        BZ        A53       ; BRANCH IF FIRST DELAY IS OV
    1262/    85E8 : 35                           DS        5
    1263/    85E9 : 90 DD                        BR        A3
    1264/    85EB : 36                  A53      DS        6
    1265/    85EC : 94 DA                        BNZ       A3        ; BRANCH IF DELAY TIME IS OVE
    1266/    85EE : 76                           LIS       6
    1267/    85EF : 56                           LR        6,A       ; RELOAD DELAY TIME FOR REPEA
    1268/    85F0 : 90 EB                        BR        A5
    1269/    85F2 :                     ;* DETERMINE WHICH KEY WAS DETECTED
    1270/    85F2 : 11                  A54      LR        H,DC
    1271/    85F3 : 20 10                        LI        H'10'
    1272/    85F5 : F0                           NS        0
    1273/    85F6 : 94 04                        BNZ       A6        ; BRANCH IF NOT HEX DIGIT KEY
    1274/    85F8 : 29 86 97                     JMP       A27
    1275/    85FB : 2A 86 0B            A6       DCI       FUNC
    1276/    85FE : 7F                           LIS       15
    1277/    85FF : F0                           NS        0
    1278/    8600 : 50                           LR        0,A
    1279/    8601 : 84 06                        BZ        A19
    1280/    8603 : 73                  A4       LIS       3
    1281/    8604 : 8E                           ADC
    1282/    8605 : 30                           DS        0
    1283/    8606 : 94 FC                        BNZ       A4
    1284/    8608 : 0E                  A19      LR        Q,DC
    1285/    8609 : 10                           LR        DC,H
    1286/    860A : 0D                           LR        P0,Q
    1287/    860B : 29 86 5C            FUNC     JMP       DA
    1288/    860E : 29 86 23                     JMP       ENT
    1289/    8611 : 29 86 50                     JMP       IA
    1290/    8614 : 29 86 D2                     JMP       MOVU
    1291/    8617 : 29 86 EF                     JMP       MOVD
    1292/    861A : 29 86 64                     JMP       STM
    1293/    861D : 29 86 40                     JMP       GO
    1294/    8620 : 29 86 83                     JMP       CLR
    1295/    8623 :                     ;* 'ENTER' KEY DETECTED
    1296/    8623 : 71                  ENT      LIS       1
    1297/    8624 : F2                           NS        2
    1298/    8625 : 84 17                        BZ        LA        ; BRANCH IF NOT STORE MODE
    1299/    8627 : 72                           LIS       2
    1300/    8628 : E7                           XS        7
    1301/    8629 : 84 9D                        BZ        A3        ; BRANCH IF NO DIGITS ENTERED
    1302/    862B : 20 FF               A14      LI        H'FF'     ; ADDRESS DISPLAY TO DC
    1303/    862D : 8E                           ADC
    1304/    862E : 6C                           LISL      4         ; DATA DISPLAY TO MEMORY
    1305/    862F : 4D                           LR        A,I
    1306/    8630 : 15                           SL        4
    1307/    8631 : EC                           XS        S
    1308/    8632 : 17                           ST
    1309/    8633 : 28 87 1C                     PI        INAD
    1310/    8636 : 28 87 13            A25      PI        MTDD
    1311/    8639 : 72                  A23      LIS       2         ; SET DIGIT COUNT TO 2
    1312/    863A : 57                  A16      LR        7,A
    1313/    863B : 90 8B                        BR        A3
    1314/    863D : 74                  LA       LIS       4         ; SET DIGIT COUNT TO 4
    1315/    863E : 90 FB                        BR        A16
    1316/    8640 :                     ;* 'GO' KEY DETECTED
    1317/    8640 : 20 FF               GO       LI        H'FF'     ; DISPLAY OFF
    1318/    8642 : B1                           OUTS      1
    1319/    8643 : 20 C0                        LI        H'C0'
    1320/    8645 : B0                           OUTS      0
 AS V1.42 Beta [Bld 239] - Source File FAIRBUG.ASM - Page 23 - 04/03/2023 01:42:09 PM


    1321/    8646 : 70                           LIS       0
    1322/    8647 : BE                           OUTS      14        ; INTERRUPT OFF
    1323/    8648 : 28 87 02                     PI        ATDC
    1324/    864B : 67                           LISU      7
    1325/    864C : 69                           LISL      1
    1326/    864D : 4C                           LR        A,S
    1327/    864E : 06                           LR        QU,A      ; RESTORE QU FOR FAIR-BUG
    1328/    864F : 0C                           PK
    1329/    8650 :                     ;* 'INCREMENT ADDRESS' KEY DETECTED
    1330/    8650 : 28 87 1C            IA       PI        INAD      ; INCREMENT ADDRESS DISPLAY
    1331/    8653 : 28 87 13            A34      PI        MTDD      ; MEMORY TO DATA DISPLAY
    1332/    8656 : 71                           LIS       1
    1333/    8657 : F2                           NS        2
    1334/    8658 : 94 E0                        BNZ       A23       ; BRANCH IF STORE MODE FLAG
    1335/    865A : 90 E2                        BR        LA
    1336/    865C :                     ;* 'DECREMENT ADDESS' KEY DETECTED
    1337/    865C : 28 87 27            DA       PI        DEAD
    1338/    865F : 28 87 02                     PI        ATDC
    1339/    8662 : 90 F0                        BR        A34
    1340/    8664 :                     ;* 'STORE MODE' KEY DETECTED
    1341/    8664 : 71                  STM      LIS       1
    1342/    8665 : F2                           NS        2
    1343/    8666 : 94 0C                        BNZ       A26       ; BRANCH IF STORE MODE FLAG
    1344/    8668 : 71                           LIS       1         ; SET STORE MODE FLAG
    1345/    8669 : E2                           XS        2
    1346/    866A : 52                           LR        2,A
    1347/    866B : 67                           LISU      7
    1348/    866C : 68                           LISL      0
    1349/    866D : 4C                           LR        A,S
    1350/    866E : 22 40                        OI        H'40'
    1351/    8670 : 5C                           LR        S,A       ; SET STORE MODE LIGHT FLAG
    1352/    8671 : 90 C7                        BR        A23
    1353/    8673 : E2                  A26      XS        2
    1354/    8674 : 52                           LR        2,A       ; RESET STORE MODE FLAG
    1355/    8675 : 67                           LISU      7
    1356/    8676 : 68                           LISL      0
    1357/    8677 : 20 40                        LI        H'40'
    1358/    8679 : EC                           XS        S
    1359/    867A : 5C                           LR        S,A       ; RESET STORE MODE LIGHT FLAG
    1360/    867B : 28 87 02            A18      PI        ATDC
    1361/    867E : 28 87 13                     PI        MTDD
    1362/    8681 : 90 BB                        BR        LA
    1363/    8683 :                     ;* 'CLEAR' KEY DETECTED
    1364/    8683 : 71                  CLR      LIS       1
    1365/    8684 : F2                           NS        2
    1366/    8685 : 94 08                        BNZ       A13       ; BRANCH IF STORE MODE FLAG
    1367/    8687 : 74                           LIS       4
    1368/    8688 : E7                           XS        7
    1369/    8689 : 84 31                        BZ        A24       ; BRANCH IF DIGIT COUNT IS 4
    1370/    868B : 29 85 B8                     JMP       A9
    1371/    868E : 72                  A13      LIS       2
    1372/    868F : F7                           NS        7
    1373/    8690 : 94 2A                        BNZ       A24       ; BRANCH IF DIGIT COUNT IS 2
    1374/    8692 : 20 FF                        LI        H'FF'
    1375/    8694 : 8E                           ADC                 ; DECREMENT DATA COUNTER
    1376/    8695 : 90 A0                        BR        A25
    1377/    8697 :                     ;* CHECK IF FUNCTION FLAG SET BEFORE ACCEPTIN
    1378/    8697 : 40                  A27      LR        A,0
    1379/    8698 : 53                           LR        3,A
    1380/    8699 : 70                           LIS       0
 AS V1.42 Beta [Bld 239] - Source File FAIRBUG.ASM - Page 24 - 04/03/2023 01:42:09 PM


    1381/    869A : E7                           XS        7
    1382/    869B : 84 1F                        BZ        A24       ; BRANCH IF DIGIT COUNT IS 0
    1383/    869D : 71                           LIS       1
    1384/    869E : F2                           NS        2
    1385/    869F : 94 1E                        BNZ       A33       ; BRANCH IF STORE MODE FLAG
    1386/    86A1 : 74                           LIS       4
    1387/    86A2 : E7                           XS        7
    1388/    86A3 : 94 05                        BNZ       A28       ; BRANCH IF DIGIT COUNT IS NO
    1389/    86A5 : 6B                           LISL      3
    1390/    86A6 : 5E                  A30      LR        D,A
    1391/    86A7 : 8F FE                        BR7       A30
    1392/    86A9 :                     ;* LOAD DIGIT TO ADDRESS DISPLAY
    1393/    86A9 : 69                  A28      LISL      1
    1394/    86AA : 4E                           LR        A,D
    1395/    86AB : 5D                           LR        I,A
    1396/    86AC : 5D                           LR        I,A
    1397/    86AD : 4E                           LR        A,D
    1398/    86AE : 5D                           LR        I,A
    1399/    86AF : 5D                           LR        I,A
    1400/    86B0 : 4E                           LR        A,D
    1401/    86B1 : 5D                           LR        I,A
    1402/    86B2 : 43                           LR        A,3
    1403/    86B3 : 5C                           LR        S,A
    1404/    86B4 : 28 87 02                     PI        ATDC      ; ADDRESS DISPLAY TO DC
    1405/    86B7 : 28 87 13                     PI        MTDD      ; MEMORY TO DATA DISPLAY
    1406/    86BA : 37                  A29      DS        7         ; DECREMENT DIGIT COUNT
    1407/    86BB : 29 85 C7            A24      JMP       A3
    1408/    86BE :                     ;* LOAD DIGIT TO DATA DISPLAY
    1409/    86BE : 72                  A33      LIS       2
    1410/    86BF : F7                           NS        7
    1411/    86C0 : 84 06                        BZ        A35       ; BRANCH IF DIGIT COUNT NOT 2
    1412/    86C2 : 66                           LISU      6
    1413/    86C3 : 6C                           LISL      4         ; CLEAR DATA DISPLAY
    1414/    86C4 : 70                           LIS       0
    1415/    86C5 : 5D                           LR        I,A
    1416/    86C6 : 5C                           LR        S,A
    1417/    86C7 : E7                  A35      XS        7
    1418/    86C8 : 84 F2                        BZ        A24       ; BRANCH IF DIGIT COUNT IS ZE
    1419/    86CA : 6D                           LISL      5         ; DIGIT TO DATA DISPLAY
    1420/    86CB : 4E                           LR        A,D
    1421/    86CC : 5D                           LR        I,A
    1422/    86CD : 43                           LR        A,3
    1423/    86CE : 5C                           LR        S,A
    1424/    86CF : 37                           DS        7
    1425/    86D0 : 90 EA                        BR        A24
    1426/    86D2 :                     ;* 'MOVE UP' KEY DETECTED
    1427/    86D2 : 71                  MOVU     LIS       1
    1428/    86D3 : F2                           NS        2
    1429/    86D4 : 84 E6                        BZ        A24       ; BRANCH IF NOT IN STORE MODE
    1430/    86D6 : 20 FF                        LI        H'FF'
    1431/    86D8 : 53                           LR        3,A
    1432/    86D9 : 8E                           ADC
    1433/    86DA : 0E                           LR        Q,DC
    1434/    86DB : 8E                           ADC
    1435/    86DC : 11                           LR        H,DC
    1436/    86DD : 07                           LR        QL,A
    1437/    86DE : 0F                           LR        DC,Q
    1438/    86DF : 16                  A12      LM
    1439/    86E0 : 17                           ST
    1440/    86E1 : 20 FD                        LI        H'FD'
 AS V1.42 Beta [Bld 239] - Source File FAIRBUG.ASM - Page 25 - 04/03/2023 01:42:09 PM


    1441/    86E3 : 8E                           ADC
    1442/    86E4 : 33                           DS        3
    1443/    86E5 : 43                           LR        A,3
    1444/    86E6 : EB                           XS        11
    1445/    86E7 : 94 F7                        BNZ       A12
    1446/    86E9 : 16                           LM
    1447/    86EA : 20 2B                        LI        H'2B'
    1448/    86EC : 17                           ST
    1449/    86ED : 90 8D               A17      BR        A18
    1450/    86EF :                     ;* 'MOVE DOWN" KEY DETECTED
    1451/    86EF : 71                  MOVD     LIS       1
    1452/    86F0 : F2                           NS        2
    1453/    86F1 : 84 C9                        BZ        A24       ; BRANCH IF NOT IN STORE MODE
    1454/    86F3 : 16                           LM
    1455/    86F4 : 50                           LR        0,A
    1456/    86F5 : 20 FE                        LI        H'FE'
    1457/    86F7 : 8E                           ADC
    1458/    86F8 : 40                           LR        A,0
    1459/    86F9 : 17                           ST
    1460/    86FA : 16                           LM
    1461/    86FB : 11                           LR        H,DC
    1462/    86FC : 71                           LIS       1
    1463/    86FD : EB                           XS        11
    1464/    86FE : 94 F0                        BNZ       MOVD
    1465/    8700 : 90 EC                        BR        A17
    1466/    8702 :                     ;*
    1467/    8702 :                     ;* ADDRESS DISPLAY TO DC SUBROUTINE
    1468/    8702 :                     ;*
    1469/    8702 : 66                  ATDC     LISU      6
    1470/    8703 : 6B                           LISL      3
    1471/    8704 : 4E                  A15      LR        A,D
    1472/    8705 : 54                           LR        4,A
    1473/    8706 : 4E                           LR        A,D
    1474/    8707 : 15                           SL        4
    1475/    8708 : E4                           XS        4
    1476/    8709 : 8F 05                        BR7       A36
    1477/    870B : 06                           LR        QU,A
    1478/    870C : 04                           LR        KU,A
    1479/    870D : 0F                           LR        DC,Q
    1480/    870E : 1C                           POP
    1481/    870F : 07                  A36      LR        QL,A
    1482/    8710 : 05                           LR        KL,A
    1483/    8711 : 90 F2                        BR        A15
    1484/    8713 :                     ;*
    1485/    8713 :                     ;* MEMORY TO DATA DISPLAY SUBROUTINE
    1486/    8713 :                     ;*
    1487/    8713 : 6C                  MTDD     LISL      4
    1488/    8714 : 16                           LM
    1489/    8715 : 54                           LR        4,A
    1490/    8716 : 14                           SR        4
    1491/    8717 : 5D                           LR        I,A
    1492/    8718 : 7F                           LIS       15
    1493/    8719 : F4                           NS        4
    1494/    871A : 5C                           LR        S,A
    1495/    871B : 1C                           POP
    1496/    871C :                     ;*
    1497/    871C :                     ;* INCREMENT ADDRESS DISPLAY SUBROUTINE
    1498/    871C :                     ;*
    1499/    871C : 6B                  INAD     LISL      3
    1500/    871D : 4C                  A21      LR        A,S
 AS V1.42 Beta [Bld 239] - Source File FAIRBUG.ASM - Page 26 - 04/03/2023 01:42:09 PM


    1501/    871E : 1F                           INC
    1502/    871F : 15                           SL        4
    1503/    8720 : 14                           SR        4
    1504/    8721 : 5E                           LR        D,A
    1505/    8722 : 94 03                        BNZ       A22       ; BRANCH IF DIGIT WAS NOT 'F'
    1506/    8724 : 8F F8                        BR7       A21       ; BRANCH IF NOT MSD
    1507/    8726 : 1C                  A22      POP
    1508/    8727 :                     ;*
    1509/    8727 :                     ;* DECREMENT ADDRESS DISPLAY SUBROUTINE
    1510/    8727 :                     ;*
    1511/    8727 : 6B                  DEAD     LISL      3
    1512/    8728 : 3C                  A31      DS        S
    1513/    8729 : 4C                           LR        A,S
    1514/    872A : 14                           SR        4
    1515/    872B : 84 04                        BZ        A32       ; BRANCH IF DIGIT WAS NOT ZER
    1516/    872D : 5E                           LR        D,A       ; 15 TO DISPLAY REG.
    1517/    872E : 8F F9                        BR7       A31       ; BRANCH IF NOT MSD
    1518/    8730 : 1C                  A32      POP
    1519/    8731 :                     ;*
    1520/    8731 :                     ;* SCAN KEYBOARD SUBROUTINE
    1521/    8731 :                     ;*
    1522/    8731 : 08                  SCAN     LR        K,P
    1523/    8732 : 0A                           LR        A,IS
    1524/    8733 : 65                           LISU      5
    1525/    8734 : 6F                           LISL      7
    1526/    8735 : 5E                           LR        D,A
    1527/    8736 :                     ;* LOAD KEY CODE
    1528/    8736 : 20 17               A39      LI        H'17'
    1529/    8738 : 50                           LR        0,A
    1530/    8739 :                     ;* LOAD FIRST STROBE
    1531/    8739 : 20 FE                        LI        H'FE'
    1532/    873B : 5C                           LR        S,A
    1533/    873C :                     ;* OUTPUT STROBE
    1534/    873C : 7F                  A40      LIS       15        ; BLANK DISPLAY
    1535/    873D : B1                           OUTS      1
    1536/    873E : 20 C0                        LI        H'C0'
    1537/    8740 : B0                           OUTS      0
    1538/    8741 : 4E                           LR        A,D
    1539/    8742 : B0                           OUTS      0
    1540/    8743 :                     ;* READ KEYS
    1541/    8743 : 74                           LIS       4
    1542/    8744 : 5C                           LR        S,A
    1543/    8745 : A1                           INS       1
    1544/    8746 : 14                           SR        4
    1545/    8747 : 84 17                        BZ        A43       ; BRANCH IF NO KEY IN THIS CO
    1546/    8749 : 15                           SL        4
    1547/    874A : 91 08               A41      BM        A42       ; BRANCH IF KEY IS IN THIS RO
    1548/    874C :                     ;* GO TO NEXT ROW IF NOT LAST ROW
    1549/    874C : 30                           DS        0
    1550/    874D : 3C                           DS        S
    1551/    874E : 84 2B                        BZ        A47       ; BRANCH IF LAST ROW IN THIS
    1552/    8750 : 13                           SL        1
    1553/    8751 : 90 F8                        BR        A41
    1554/    8753 :                     ;* IS THIS FIRST SCAN
    1555/    8753 : 6C                  A42      LISL      4
    1556/    8754 : 71                           LIS       1
    1557/    8755 : EC                           XS        S
    1558/    8756 : 94 26                        BNZ       A48       ; BRANCH IF KBD FLAG NOT SET
    1559/    8758 :                     ;* RESET KBD FLAG
    1560/    8758 : 5E                           LR        D,A
 AS V1.42 Beta [Bld 239] - Source File FAIRBUG.ASM - Page 27 - 04/03/2023 01:42:09 PM


    1561/    8759 :                     ;* COMPARE TWO SCANS
    1562/    8759 : 4C                           LR        A,S
    1563/    875A : E0                           XS        0
    1564/    875B : 84 19                        BZ        A46       ; BRANCH IF SCANS ARE THE SAM
    1565/    875D : 90 0F                        BR        A45
    1566/    875F :                     ;* CHANGE KEY CODE FOR NEXT COLUMN
    1567/    875F : 6E                  A43      LISL      6
    1568/    8760 : 20 FC                        LI        H'FC'
    1569/    8762 : C0                           AS        0
    1570/    8763 : 50                           LR        0,A
    1571/    8764 :                     ;* SHIFT STROBVE ONE POSITION
    1572/    8764 : 4C                  A44      LR        A,S
    1573/    8765 : 13                           SL        1
    1574/    8766 : 23 01                        XI        1
    1575/    8768 : 5C                           LR        S,A
    1576/    8769 :                     ;* HAS LAST COLUMN BEEN SCANNED ALREADY
    1577/    8769 : 21 40                        NI        H'40'
    1578/    876B : 94 D0                        BNZ       A40       ; BRANCH IF NOT LAST STROBE
    1579/    876D :                     ;* STROBE 'FF' IN KEY CODE REGISTER
    1580/    876D : 20 FF               A45      LI        H'FF'
    1581/    876F : 50                           LR        0,A
    1582/    8770 :                     ;* RESET KBD FLAG
    1583/    8770 : 6C                           LISL      4
    1584/    8771 : 70                           LIS       0
    1585/    8772 : 5C                           LR        S,A
    1586/    8773 : 90 0C                        BR        A51
    1587/    8775 :                     ;* RESTORE ISAR
    1588/    8775 : 6F                  A46      LISL      7
    1589/    8776 : 4C                           LR        A,S
    1590/    8777 : 0B                           LR        IS,A
    1591/    8778 : 09                           LR        P,K
    1592/    8779 : 1C                           POP
    1593/    877A :                     ;* GO TO NEXT ROW
    1594/    877A : 6E                  A47      LISL      6
    1595/    877B : 90 E8                        BR        A44
    1596/    877D :                     ;* SET KBD FLAG
    1597/    877D : 5E                  A48      LR        D,A
    1598/    877E :                     ;* STORE KEY CODE OF FIRST SCAN
    1599/    877E : 40                           LR        A,0
    1600/    877F : 5E                           LR        D,A
    1601/    8780 :                     ;* LOAD COUNTERS FOR BOUNCE TIME OF 28MS
    1602/    8780 : 28 87 99            A51      PI        DISP      ; RESTORE DISPLAY
    1603/    8783 : 65                           LISU      5
    1604/    8784 : 6A                           LISL      2
    1605/    8785 : 7B                           LIS       11
    1606/    8786 : 5E                           LR        D,A
    1607/    8787 : 20 FF               A49      LI        H'FF'
    1608/    8789 : 5C                           LR        S,A
    1609/    878A : 3C                  A50      DS        S
    1610/    878B : 94 FE                        BNZ       A50       ; BRANCH IF COUNTER 1 NOT ZER
    1611/    878D : 6A                           LISL      2
    1612/    878E : 3E                           DS        D
    1613/    878F : 94 F7                        BNZ       A49       ; BRANCH IF COUNTER 2 NOT ZER
    1614/    8791 : 6C                           LISL      4
    1615/    8792 : 71                           LIS       1
    1616/    8793 : FC                           NS        S
    1617/    8794 : 84 E0                        BZ        A46       ; BRANCH IF NOT KBD FLG
    1618/    8796 : 6E                           LISL      6
    1619/    8797 : 90 9E                        BR        A39
    1620/    8799 :                     ;*
 AS V1.42 Beta [Bld 239] - Source File FAIRBUG.ASM - Page 28 - 04/03/2023 01:42:09 PM


    1621/    8799 :                     ;* DISPLAY SUBROUTINE
    1622/    8799 :                     ;*
    1623/    8799 : 66                  DISP     LISU      6
    1624/    879A : 6F                           LISL      7
    1625/    879B : 41                           LR        A,1
    1626/    879C : 5E                           LR        D,A       ; SAVE REG. 1
    1627/    879D : 40                           LR        A,0
    1628/    879E : 5C                           LR        S,A       ; SAVE REG. 0
    1629/    879F : 67                           LISU      7
    1630/    87A0 : 68                           LISL      0
    1631/    87A1 : 71                           LIS       1
    1632/    87A2 : 50                           LR        0,A
    1633/    87A3 : 4C                           LR        A,S
    1634/    87A4 : 51                           LR        1,A
    1635/    87A5 : 66                           LISU      6
    1636/    87A6 : 6D                           LISL      5
    1637/    87A7 : 41                  A52      LR        A,1
    1638/    87A8 : 23 FF                        XI        H'FF'
    1639/    87AA : B0                           OUTS      0
    1640/    87AB : 4E                           LR        A,D
    1641/    87AC : 18                           COM
    1642/    87AD : 15                           SL        4
    1643/    87AE : 14                           SR        4
    1644/    87AF : B1                           OUTS      1
    1645/    87B0 : A0                           INS       0
    1646/    87B1 : E0                           XS        0
    1647/    87B2 : B0                           OUTS      0
    1648/    87B3 : 40                           LR        A,0
    1649/    87B4 : 13                           SL        1
    1650/    87B5 : 50                           LR        0,A
    1651/    87B6 : 8F F0                        BR7       A52
    1652/    87B8 : 6E                           LISL      6
    1653/    87B9 : 4D                           LR        A,I
    1654/    87BA : 50                           LR        0,A       ; RESTORE REG. 0
    1655/    87BB : 4C                           LR        A,S
    1656/    87BC : 51                           LR        1,A       ; RESTORE REG. 1
    1657/    87BD : 1C                           POP
    1658/    87BE :                     ;*
    1659/    87BE :                     ;* SONG SUBROUTINE
    1660/    87BE :                     ;*     LOAD STARTING LOCATION OF SONG CONSTAN
    1661/    87BE :                     ;*     LOAD TEMPO INTO R7
    1662/    87BE :                     ;*
    1663/    87BE : 20 40               SONG     LI        H'40'
    1664/    87C0 : 56                           LR        6,A       ; SET NOTE FLAG
    1665/    87C1 : 47                           LR        A,7
    1666/    87C2 : 55                           LR        5,A       ; STORE TEMPO CONSTANT IN WOR
    1667/    87C3 : 16                           LM
    1668/    87C4 : 54                           LR        4,A       ; STORE NOTE DURATION CONSTAN
    1669/    87C5 : 51                           LR        1,A       ; RETAIN NOTE DURATION CONSTA
    1670/    87C6 : F1                           NS        1
    1671/    87C7 : 84 37                        BZ        FINS      ; END OF SONG IF NOTE DURATIO
    1672/    87C9 : 16                           LM
    1673/    87CA : 53                           LR        3,A       ; RETAIN NOTE PITCH CONSTANT
    1674/    87CB : 23 7F                        XI        H'7F'
    1675/    87CD : 94 02                        BNZ       A2        ; BRANCH IF NOT A REST
    1676/    87CF : 56                           LR        6,A       ; CLEAR NOTE FLAG
    1677/    87D0 : 20 FF               A2       LI        H'FF'
    1678/    87D2 : 59                           LR        9,A       ; LOAD PITCH COUNTER A
    1679/    87D3 : 76                           LIS       6
    1680/    87D4 : 58                           LR        8,A       ; LOAD PITCH COUNTER B
 AS V1.42 Beta [Bld 239] - Source File FAIRBUG.ASM - Page 29 - 04/03/2023 01:42:09 PM


    1681/    87D5 : 43                  A55      LR        A,3
    1682/    87D6 : 52                           LR        2,A       ; STORE NOTE PITCH CONSTANT I
    1683/    87D7 : A8                           INS       8
    1684/    87D8 : E6                           XS        6
    1685/    87D9 : B8                           OUTS      8         ; TOGGLE OUTPUT PORT
    1686/    87DA : 39                  A11      DS        9
    1687/    87DB : 94 04                        BNZ       A8        ; BRANCH IF PITCH COUNTER A N
    1688/    87DD : 38                           DS        8
    1689/    87DE : 84 06                        BZ        A7        ; BRANCH IF PITCH COUNTER B I
    1690/    87E0 : 32                  A8       DS        2         ; DECREMENT NOTE PITCH CONSTA
    1691/    87E1 : 81 F8                        BP        A11       ; BRANCH IF NOTE PITCH CONSTA
    1692/    87E3 : 90 F1                        BR        A55       ; GO TO TOGGLE OF OUTPUT
    1693/    87E5 : 32                  A7       DS        2         ; DECR. NOTE PITCH CONSTANT T
    1694/    87E6 : 32                           DS        2
    1695/    87E7 : 76                           LIS       6
    1696/    87E8 : 58                           LR        8,A       ; RELOAD PITCH COUNTER B
    1697/    87E9 : 34                           DS        4         ; DECREMENT NOTE DURATION CON
    1698/    87EA : 94 08                        BNZ       A10       ; BRANCH IF NOTE DURATION CON
    1699/    87EC : 41                           LR        A,1
    1700/    87ED : 54                           LR        4,A       ; RELOAD NOTE DURATION CONSTA
    1701/    87EE : 35                           DS        5         ; DECREMENT REMPO CONSTANT
    1702/    87EF : 94 EA                        BNZ       A11       ; BRANCH IF TEMPO CONSTANT NO
    1703/    87F1 : 90 CC                        BR        SONG      ; GO TO NEXT NOTE
    1704/    87F3 : 71                  A10      LIS       1
    1705/    87F4 : E5                           XS        5
    1706/    87F5 : 94 E4                        BNZ       A11       ; BRANCH IF TEMPO CONSTANT NO
    1707/    87F7 : 32                           DS        2         ; DECR. NOTE PITCH CONSTANT T
    1708/    87F8 : 71                           LIS       1
    1709/    87F9 : E4                           XS        4
    1710/    87FA : 94 DF                        BNZ       A11       ; BRANCH IF NOTE DURATION CON
    1711/    87FC : 56                           LR        6,A       ; CLEAR NOTE FLAG TO PROVIDE
    1712/    87FD : 90 DC                        BR        A11
    1713/    87FF : 1C                  FINS     POP
    1714/    8800 :                              END
 AS V1.42 Beta [Bld 239] - Source File FAIRBUG.ASM - Page 30 - 04/03/2023 01:42:09 PM


  Symbol Table (* = unused):
  --------------------------

 A :                           82B9 - |  A1 :                          82BA C |
 A10 :                         87F3 C |  A11 :                         87DA C |
 A12 :                         86DF C |  A13 :                         868E C |
*A14 :                         862B C |  A15 :                         8704 C |
 A16 :                         863A C |  A17 :                         86ED C |
 A18 :                         867B C |  A19 :                         8608 C |
 A2 :                          87D0 C |  A20 :                         85BB C |
 A21 :                         871D C |  A22 :                         8726 C |
 A23 :                         8639 C |  A24 :                         86BB C |
 A25 :                         8636 C |  A26 :                         8673 C |
 A27 :                         8697 C |  A28 :                         86A9 C |
*A29 :                         86BA C |  A3 :                          85C7 C |
 A30 :                         86A6 C |  A31 :                         8728 C |
 A32 :                         8730 C |  A33 :                         86BE C |
 A34 :                         8653 C |  A35 :                         86C7 C |
 A36 :                         870F C |  A38 :                         85E5 C |
 A39 :                         8736 C |  A4 :                          8603 C |
 A40 :                         873C C |  A41 :                         874A C |
 A42 :                         8753 C |  A43 :                         875F C |
 A44 :                         8764 C |  A45 :                         876D C |
 A46 :                         8775 C |  A47 :                         877A C |
 A48 :                         877D C |  A49 :                         8787 C |
 A5 :                          85DC C |  A50 :                         878A C |
 A51 :                         8780 C |  A52 :                         87A7 C |
 A53 :                         85EB C |  A54 :                         85F2 C |
 A55 :                         87D5 C |  A6 :                          85FB C |
 A7 :                          87E5 C |  A8 :                          87E0 C |
 A9 :                          85B8 C |  ADON :                        8539 C |
 AEND :                        852F C |  AGAN :                        8518 C |
*ARCHITECTURE :                                      "x86_64-unknown-linux" - |
 ATDC :                        8702 C |  B :                           8357 C |
 BAUD :                           0 - |  BCNT :                           2 - |
 BG1 :                         80D1 C |  BGL1 :                        8000 C |
 BGLP :                        8001 C |  BGND :                        802C C |
 BGSV :                        80AE C |  BOT1 :                        845C C |
 BRAK :                        826F C |  BXX :                         826C C |
 BYTE :                        8515 C |  C :                           82BF C |
 C0 :                          82CB C |  C1 :                          82D3 C |
 C2 :                          82D9 C |  C3 :                          82E7 C |
 C4 :                          82E6 C |  C5 :                          82EC C |
*C55 :                         82F7 C | *CASESENSITIVE :                  0 - |
 CC :                            0B - |  CCNT :                           5 - |
 CHAR :                        853C C |  CHR1 :                          0B - |
 CHRS :                           1 - |  CKSM :                           7 - |
 CLR :                         8683 C | *CONSTPI :        3.141592653589793 - |
 CONT :                        8479 C |  COR1 :                        819B C |
 COR2 :                        81A2 C |  COR3 :                        81A4 C |
 COR4 :                        81A6 C |  COR5 :                        81A8 C |
 COR6 :                        81A9 C |  COR7 :                        81B6 C |
 COR8 :                        81B2 C |  CORE :                        8185 C |
 CORN :                        8182 C |  CORT :                        8187 C |
 CR :                            0D - |  D :                           82FB C |
 DA :                          865C C | *DATA :                        8475 C |
*DATE :                "04/03/2023" - |  DEAD :                        8727 C |
 DISP :                        8799 C |  DLY1 :                        8597 C |
 DLY2 :                        8598 C |  DLY3 :                        8557 C |
 DLY4 :                        856D C |  DLY5 :                        85A3 C |
 AS V1.42 Beta [Bld 239] - Source File FAIRBUG.ASM - Page 31 - 04/03/2023 01:42:09 PM


 E :                           8300 C |  EA :                             5 - |
 EAHI :                           5 - |  EALO :                           6 - |
*EDUC :                        85AD C |  EDUL :                        8033 C |
 EDUX :                        85AB C |  EGHT :                        8438 C |
 ENDX :                        84A8 C |  ENT :                         8623 C |
 F :                           8306 C |  FA :                          813C C |
*FALSE :                          0 - |  FB :                          813E C |
 FCNT :                           8 - |  FCON :                        8058 C |
 FECH :                        8139 C |  FHI :                         8125 C |
 FINS :                        87FF C |  FINT :                        812E C |
 FLG :                            9 - | *FLO :                         8124 C |
 FLOP :                        8082 C |  FLP1 :                        811E C |
 FMLP :                        84D1 C |  FOK :                         8170 C |
 FOP1 :                        811B C |  FOP2 :                        811D C |
 FORM :                        84B7 C |  FPN1 :                        8045 C |
 FPUN :                        8036 C |  FUNC :                        860B C |
 G :                           8309 C |  G1 :                          8315 C |
 GO :                          8640 C |  H :                           8323 C |
*HAS64 :                          1 - |  HERE :                        80A5 C |
 HEX :                         829A C |  HFLG :                           8 - |
*HI :                           0F8 - |  HIBY :                          82 - |
 HIGH :                        8451 C | *HXX :                         81D0 C |
 I :                           8318 C |  I1 :                          831A C |
 IA :                          8650 C |  IDLE :                        8460 C |
 INAD :                        871C C |  INS :                         840F C |
 IPOR :                           8 - |  J :                           835B C |
 JMP :                         84FC C |  L :                           8329 C |
 LA :                          863D C |  LF :                            0A - |
*LISTON :                         1 - |  LOAD :                        8446 C |
 LOBY :                         0B9 - |  LOOP :                        8562 C |
 LOP2 :                        856B C | *LOP3 :                        856A C |
 LOUP :                        80FE C |  M :                           832C C |
*MACEXP :                         7 - |  MBGN :                        822C C |
 MBY2 :                        8234 C |  MCOM :                        8259 C |
 MEND :                        823A C |  MHI :                         0BEB - |
 MLO :                          3EB - |  MLOP :                        825C C |
 MM :                            0A - | *MOMCPU :                      3850 - |
*MOMCPUNAME :               "F3850" - |  MOVD :                        86EF C |
 MOVE :                        8224 C |  MOVU :                        86D2 C |
 MTDD :                        8713 C |  MXX :                         8245 C |
 N :                           832F C |  N1 :                          8333 C |
*NESTMAX :                      100 - |  NHX :                         820A C |
 NOSP :                        854B C |  NUSE :                          0B - |
 O :                           8326 C |  OO :                            0C - |
 OPOR :                           8 - |  OUTS :                        8509 C |
 P :                           833B C |  P1 :                          833E C |
 P2 :                          8343 C |  P3 :                          8350 C |
 PBLK :                        83DE C |  PDLY :                        8543 C |
 PINP :                        853D C |  PIO :                         83F5 C |
 PLP :                         83E1 C |  PLUS :                        82A9 C |
 PLXX :                        83EF C |  PONT :                        842F C |
 PORT :                        84E6 C | *POUT :                        834D C |
 PP :                            0D - |  PPA :                         83D5 C |
 PPB :                         83D9 C |  PPC :                         8413 C |
 PPRT :                           9 - |  PPUN :                        83CD C |
 PSTS :                           8 - |  PUNL :                        8419 C |
 PXX :                         8403 C |  R :                           8361 C |
 R1 :                          8363 C |  R2 :                          836D C |
 R22 :                         8370 C |  R23 :                         8387 C |
*R3 :                          8369 C |  R4 :                          838D C |
 AS V1.42 Beta [Bld 239] - Source File FAIRBUG.ASM - Page 32 - 04/03/2023 01:42:09 PM


 R44 :                         83A8 C |  R5 :                          83AD C |
*R6 :                          83AE C |  R7 :                          83C1 C |
*R76 :                         83A3 C |  R77 :                         83B1 C |
*READ :                        81DC C | *RELAXED :                        1 - |
 REST :                        80E7 C |  RPTC :                        81F5 C |
 RR :                            0F - |  RTN :                         81FC C |
 RTN1 :                        8219 C |  S :                           8353 C |
 SA :                             3 - | *SAVE :                           6 - |
 SCAN :                        8731 C |  SETA :                        849D C |
 SIZE :                           7 - |  SLF1 :                        8455 C |
 SLF2 :                        848F C | *SLF3 :                        84AE C |
 SONG :                        87BE C |  STM :                         8664 C |
 STOP :                        8577 C |  STPP :                        84AB C |
 STR1 :                        81D3 C |  STRT :                        81D1 C |
 T :                           82BD C |  TBLS :                        81B9 C |
 TBX :                         8030 C | *TEMP :                           3 - |
*TIME :               "01:42:09 PM" - | *TRUE :                           1 - |
 TT :                          828D C |  TTCR :                        8578 C |
 TTD :                         8560 C |  TTYI :                        8553 C |
 TTYO :                        8593 C |  U :                           835E C |
 V :                           82B5 C | *VERSION :                     142F - |
 X :                           82BB C |  XFLG :                           6 - |
*XS :                          84BF C | *XX :                             0 C |

    279 symbols
     34 unused symbols

 AS V1.42 Beta [Bld 239] - Source File FAIRBUG.ASM - Page 33 - 04/03/2023 01:42:09 PM


  Defined Functions:
  ------------------

AL1                                   |

 AS V1.42 Beta [Bld 239] - Source File FAIRBUG.ASM - Page 34 - 04/03/2023 01:42:09 PM


  Code Pages:
  ----------

STANDARD (0 changed characters)

1 code page

0.01 seconds assembly time

   1715 lines source file
      2 passes
      0 errors
      0 warnings
